<!doctype html> <html> <head> <title>Qriollo</title> <meta charset="utf-8"> <meta name="author" content="Hermandá Qriolla"> <meta name="generator" content="Qhuevo-0.82"> <meta name="keywords" content="qriollo,lenguaje,programación,funcional,boludo,argentino,rioplatense,functional,programming,language,argentine,argentinian,haskell"> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga');  ga('create', 'UA-70727821-1', 'auto'); ga('send', 'pageview');  </script> <style type="text/css"> body { font-family: Source Sans Pro, sans-serif; margin: 0; width: 80%; max-width: 800px; background: #75aadb; }  nav { text-align: right; padding: 5px; background: #75aadb; font-size: 1.1em; border-right: solid black 2px; border-bottom: solid black 2px; }  .navlink:hover { color: white; }  .navlink { text-decoration: none; color: black; margin-top: 5px; margin-left: 5px; margin-right: 0px; margin-bottom: 0px; padding: 5px; }  h2 { background: #75aadb; font-size: 2em; color: white; text-align: right; padding: .4em; border-right: solid black 2px; margin: 0; }  h3 { padding-top: 20px; border-bottom: solid black 1px; }  .download_button { cursor:pointer; background:#14aa00; color:#ffffff; padding-top: 20px; padding-bottom: 20px; padding-left: 10px; padding-right: 10px; border: 0px; font-size: 1.2em; font-weight:bold; }  .content { border-right: solid black 2px; background: white; padding: 1em; line-height: 1.5em; text-align: justify; }  .keyword { color: #000080; font-weight: bold; font-size: 1.2em; text-decoration: none; }  .filename { color: black; font-weight: bold; }  .cmdline { font-family: Inconsolata, monospace; line-height: 1em; font-size: 12pt; }  .source_file { float: left; }  .inline_code { font-family: Inconsolata, monospace; }  .cmdline { } .user { color: #0000ff; }  .errmsg { color: #ff0000; }  .code { border: solid black 1px; padding: .5em; line-height: 1em; font-family: Inconsolata, monospace; font-size: 14pt; width: 30em; }  #Ejemplo_HolaMundo { width: 15em; }  .hl_preproc, .hl_include { color: #800080; }  .hl_comment { color: #000080; }  .hl_reserved { color: #008080; }  .hl_structure { color: #008000; }  .hl_keyword { color: #808000; }  .hl_string, .hl_number { color: #800000; }  .hl_escape { color: #800080; }  </style> <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" type="text/css" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Inconsolata" type="text/css" rel="stylesheet">  <script type="text/javascript"> var sections = [ 'sec_que_es_qriollo', 'sec_instalacion', 'sec_documentacion' ]; var section_name = { 'sec_que_es_qriollo': 'Qriollo', 'sec_instalacion': 'Bajarlo', 'sec_documentacion': 'Manual' };  function enfocar_seccion(j) { for (var i = 0; i < sections.length; i++) { var section = document.getElementById(sections[i]); if (i == j) { section.style.display = ''; } else { section.style.display = 'none'; } } }  function agregar_botones_navegacion() { var navegacion = document.getElementById('navegacion'); for (var i = 0; i < sections.length; i++) { var link = document.createElement('a'); link.appendChild(document.createTextNode(section_name[sections[i]/**/])); link.className = 'navlink'; link.href = '#'; link.onclick = (function (ii) { return function () { enfocar_seccion(ii); return false; }; })(i); navegacion.appendChild(link); } }  function empezar() { enfocar_seccion(0); agregar_botones_navegacion(); } </script> </head> <body onload="empezar()">  <header> <div style="background-image: url(logo.png); background-repeat: no-repeat; text-align: right; background-color: black; padding:1em;"> <span style="font-family:Source Sans Pro,sans-serif;font-size: 36pt; font-weight: bold; color:white; line-height:60px">Qriollo</span><br> <span style="line-height:40px; color:white"><strong>El lenguaje más boludo del mundo</strong></span> </div> </header>  <nav> <div id="navegacion" style="overflow:hidden"> </div> </nav>  <article>  <section id="sec_que_es_qriollo"> <h2>¿Qué es Qriollo?</h2>  <div class="content"> <p>Qriollo es un lenguaje de programación <a class="keyword" href="https://en.wikipedia.org/wiki/Functional_programming">funcional</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">impuro</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Eager_evaluation">estricto</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Rioplatense_Spanish">rioplatense</a> y <a class="keyword" href="https://www.youtube.com/watch?v=MT1BuzWV4KI">en joda</a>.</p> <p>El compilador de Qriollo est&aacute; desarrollado en <a class="keyword" href="https://www.haskell.org/">Haskell</a>, tiene m&uacute;ltiples <em>backends</em>, y puede generar c&oacute;digo <a class="keyword" href="https://en.wikipedia.org/wiki/C_(programming_language)">C</a>, c&oacute;digo <a class="keyword" href="https://www.python.org/">Python</a>, y <em>bytecode</em> para la <a class="keyword" href="https://en.wikipedia.org/wiki/Java_virtual_machine">JVM</a>. La implementaci&oacute;n se encuentra en fase inestable/experimental y cuenta con una <a class="keyword" href="https://en.wikipedia.org/wiki/Foreign_function_interface">interfaz de funciones gringas</a>.</p> <p>Qriollo es un lenguaje est&aacute;ticamente tipado, con <a class="keyword" href="https://en.wikipedia.org/wiki/Type_inference">inferencia de tipos</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Parametric_polymorphism">polimorfismo param&eacute;trico</a> y <a class="keyword" href="https://en.wikipedia.org/wiki/Type_class">clases de tipos</a>. Incorpora un <a class="keyword" href="https://en.wikipedia.org/wiki/Modular_programming">sistema de m&oacute;dulos</a> simple. Tiene las funcionalidades usuales de un lenguaje de programaci&oacute;n de la familia de <a class="keyword" href="https://en.wikipedia.org/wiki/ML_(programming_language)">ML</a>: <a class="keyword" href="https://en.wikipedia.org/wiki/https://en.wikipedia.org/wiki/Algebraic_data_type">tipos de datos algebraicos</a>, análisis de casos por <a class="keyword" href="https://en.wikipedia.org/wiki/Pattern_matching">comparación de patrones</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Closure_(computer_programming)">clausuras léxicas</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Tail_call">optimización de invocaciones a la cola</a>, <a class="keyword" href="https://en.wikipedia.org/wiki/Reference_(computer_science)">referencias mutables</a> y <a class="keyword" href="https://en.wikipedia.org/wiki/Call-with-current-continuation">call/cc</a>. El <em>backend</em> para C cuenta con un algoritmo de <a class="keyword" href="https://en.wikipedia.org/wiki/Garbage_collection">recolección de basura</a> exacto y <em>stop-and-copy</em>.</a> </p>  <div style="overflow: hidden"> <div class="source_file"><a class="filename" href="Ejemplos/HolaMundo.q" target="popup">HolaMundo.q</a><div id="Ejemplo_HolaMundo" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"Hola mundo<span class="hl_escape">\n</span>"</span></div></div>  <div style="text-align:right;padding-top:2em"> <form method="get" action="Qriollo-0.91.tar.gz"><button type="submit" class="download_button">&#x25bc;&nbsp; Bajar Qriollo 0,91 "Atorrante"</button></form> </div> </div> </div>  <h2>Ejemplos</h2>  <div class="content"> <h3>Elementos pares de una lista (para ejecutar interactivamente)</h3> <pre class="cmdline"><div id="ej_elementos_pares" class="code">filtrar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x % <span class="hl_number">2#</span> == <span class="hl_number">0#</span>) [<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>, <span class="hl_number">4#</span>]</div></pre> <h3>Calcular números primos (para compilar)</h3> <div style="overflow: hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Primos.q" target="popup">Primos.q</a><div id="Ejemplo_Primos" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> esPrimo<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> p<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> nadie (esDivisor p) (<span class="hl_number">2</span>..p - <span class="hl_number">1</span>)<br><br><span class="hl_keyword">el</span> esDivisor<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> p d<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> p % d == <span class="hl_number">0#</span><br><br><span class="hl_keyword">los</span> primos<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> filtrar esPrimo (<span class="hl_number">2</span>..n)<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;escupir . mostrar . primos $ <span class="hl_number">1000#</span></div></div> </div> <pre class="cmdline">$ <span class="user">qr Primos.q --c -o Primos.c</span>
$ <span class="user">gcc -o Primos Primos.c -Wall</span>
$ <span class="user">./Primos</span>
    [2#, 3#, 5#, 7#, 11#, 13#, 17#, 19#, 23#, 29#, 31#, ...</pre>  <h3>Altura de un árbol binario</h3> <div style="overflow: hidden"> <div class="source_file"><a class="filename" href="Ejemplos/AB.q" target="popup">AB.q</a><div id="Ejemplo_AB" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">un</span> Árbol <span class="hl_keyword">de</span> a <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;<span class="hl_keyword">bien</span> Hoja a <br>&nbsp;&nbsp;&nbsp;<span class="hl_keyword">bien</span> Nodo a (Árbol <span class="hl_keyword">de</span> a) (Árbol <span class="hl_keyword">de</span> a)<br><br><span class="hl_keyword">el</span> máximo<br>&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> n m<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> n &gt; m <span class="hl_keyword">da</span> n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> m<br><br><span class="hl_keyword">la</span> altura <span class="hl_keyword">de</span> Árbol <span class="hl_keyword">de</span> a <span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Hoja _)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_number">1</span><br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Nodo _ a b) <span class="hl_keyword">da</span> <span class="hl_number">1</span> + máximo (altura a)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(altura b)<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> escupir . mostrar . altura $<br>&nbsp;&nbsp;&nbsp;Nodo <span class="hl_string">'a'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Nodo <span class="hl_string">'b'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Hoja <span class="hl_string">'c'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Hoja <span class="hl_string">'d'</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Nodo <span class="hl_string">'e'</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Hoja <span class="hl_string">'f'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Hoja <span class="hl_string">'g'</span>))</div></div> </div> <pre class="cmdline">$ <span class="user">qr AB.q</span>
3#</pre>  <h3>Clases de tipos</h3> <div style="overflow: hidden"> <div class="source_file"><a class="filename" href="Ejemplos/ClasesDeTipos.q" target="popup">ClasesDeTipos.q</a><div id="Ejemplo_ClasesDeTipos" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_structure">cualidad</span> Escalable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> escalar <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> coso<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Escalable <span class="hl_keyword">para</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> escalar <span class="hl_keyword">dados</span> n m <span class="hl_keyword">da</span> n * m <br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Escalable <span class="hl_keyword">para</span> [coso] <span class="hl_keyword">con</span> Escalable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> escalar <span class="hl_keyword">es</span> fap . escalar<br><span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> escupir . mostrar $<br>&nbsp;&nbsp;&nbsp;escalar <span class="hl_number">2</span> [[<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hl_number">4#</span>, <span class="hl_number">5#</span>, <span class="hl_number">6#</span>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hl_number">7#</span>, <span class="hl_number">8#</span>, <span class="hl_number">9#</span>]]</div></div> </div> <pre class="cmdline">$ <span class="user">qr ClasesDeTipos.q</span>
[[2#, 4#, 6#], [8#, 10#, 12#], [14#, 16#, 18#]]</pre>   </div>  <h2>Historia</h2>  <div class="content"> <p>Qriollo sigue una larga tradici&oacute;n de lenguajes rioplatenses:</p> <h3>CHORONGOL '67 &ndash; Juan Carlos Turing</h3> <img src="chorongol.png">  <h3>Visual Gómez 1.0 &ndash; Simon Peyton Gómez</h3> <img src="visual_gomez.png">  <h3>salchicha++ &ndash; el Yoni Backus y la turra Lovelace</h3> <img src="salchicha.png"> </div>  </div>  </section>  <section id="sec_instalacion"> <h2>Bajarlo</h2> <div class="content">  <h3>Prerrequisitos</h3> <p>Se requiere <tt>ghc</tt> (<a class="keyword" href="https://www.haskell.org/ghc/">Glasgow Haskell Compiler</a>) para compilar el compilador de Qriollo.</p> <h3>Instalación</h3> <ul> <li> Descargar los fuentes de Qriollo: <form method="get" action="Qriollo-0.91.tar.gz"><button type="submit" class="download_button">&#x25bc;&nbsp; Bajar Qriollo 0,91 "Atorrante"</button></form> <li> Compilar: <pre class="cmdline">$ <span class="user">tar xzf Qriollo-0.91.tar.gz</span>
$ <span class="user">cd Qriollo-0.91/</span>
$ <span class="user">make</span>
$ <span class="user">./qr HolaMundo.q</span>
Hola mundo</pre> </ul>  <h3>Compilación a C</h3> <pre class="cmdline">$ <span class="user">./qr HolaMundo.q --c -o HolaMundo.c</span>
$ <span class="user">gcc -o HolaMundo HolaMundo.c -Wall</span>
$ <span class="user">./HolaMundo</span>
Hola mundo</pre>  <h3>Compilación a Python (versión 2)</h3> <pre class="cmdline">$ <span class="user">./qr HolaMundo.q --py -o HolaMundo.py</span>
$ <span class="user">python2 HolaMundo.py</span>
Hola mundo</pre>  <h3>Compilación a la JVM</h3> <pre class="cmdline">$ <span class="user">./qr HolaMundo.q --jvm</span>
$ <span class="user">java -jar HolaMundo.jar</span>
Hola mundo</pre> </div> </section>  <section id="sec_documentacion"> <h2>Manual</h2> <div class="content">  <h3>Índice</h3> <div class="toc"> <ol> <li><a href="#doc_1">Uso del intérprete y definición de valores simples (el...es...)</li> <li><a href="#doc_2">Punto de entrada del programa (el programa...)</li> <li><a href="#doc_3">Declaración y uso de funciones (el...dado...da...)</li> <li><a href="#doc_4">Definición de los tipos de datos algebraicos (un...es...bien...)</li> <li><a href="#doc_5">Declaración de funciones por análisis de casos (el...dado...da...dado...da...)</li> <li><a href="#doc_6">Coincidencia de patrones (mirar...si...boludo)</li> <li><a href="#doc_7">Guardas condicionales (dado...si...da...si no da...)</li> <li><a href="#doc_8">Funciones anónimas (la que dado...da)</li> <li><a href="#doc_9">Declaraciones locales (donde...boludo)</li> <li><a href="#doc_10">Declaraciones locales (ponele que...en)</li> <li><a href="#doc_11">Tipos y anotaciones de tipos (...de...)</li> <li><a href="#doc_12">Polimorfismo</li> <li><a href="#doc_13">Condiciones (si...da...si no da...)</li> <li><a href="#doc_14">Declaración de operadores (chirimbolos)</li> <li><a href="#doc_15">Clases de tipos (cualidad...para...boludo, encarnar...para...boludo)</li> <li><a href="#doc_16">Continuaciones y call/cc (ccc, invocar)</li> <li><a href="#doc_17">Mónadas y notación che (che...es...)</li> <li><a href="#doc_18">Interfaz de funciones gringas (gringo ... y GRINGO...)</li> <li><a href="#doc_19">Compilación condicional (pragma SI...BOLUDO)</li> <li><a href="#doc_20">Módulos (entregar..., enchufar...)</li> <li><a href="#doc_21">Caso de estudio: intérprete de Lizp</li> <li><a href="#doc_22">Convenciones léxicas</li> <li><a href="#doc_23">Recomendaciones de estilo</li> <li><a href="#doc_24">Bichos y limitaciones conocidas</li> <li><a href="#doc_25">Licencia</li> </ol> </div>   <h3><a name="doc_1">Uso del intérprete y definición de valores simples (el...es...)</a></h3>   <p>Normalmente todos los programas en Qriollo los empezás importando el módulo <span class="inline_code">Chamuyo</span>, con la declaración "<span class="inline_code"><span class="hl_include">enchufar</span> Chamuyo</span>". El módulo <span class="inline_code">Chamuyo</span> es responsable de definir las primitivas del lenguaje y algunas funciones básicas.</p>  <p>Un programa Qriollo es una lista de declaraciones. La declaración más simple es la declaración de un valor, que vincula un nombre a un valor. Tiene la estructura "<span class="inline_code"><span class="hl_keyword">el</span> &lt;nombre&gt; <span class="hl_keyword">es</span> &lt;valor&gt;</span>". Una regla general es que las palabras reservadas te las acepta indistintamente en cualquier número y género: cualesquiera de las formas <span class="inline_code"><span class="hl_keyword">el</span></span>, <span class="inline_code"><span class="hl_keyword">la</span></span>, <span class="inline_code"><span class="hl_keyword">los</span></span> o <span class="inline_code"><span class="hl_keyword">las</span></span> le dan lo mismo, e igualmente le da lo mismo usar <span class="inline_code"><span class="hl_keyword">es</span></span> o <span class="inline_code"><span class="hl_keyword">son</span></span>:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/DeclaracionValor.q" target="popup">DeclaracionValor.q</a><div id="Ejemplo_DeclaracionValor" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">la</span> fruta <span class="hl_keyword">es</span> <span class="hl_string">"Manzana"</span><br><br><span class="hl_keyword">el</span> tres <span class="hl_keyword">es</span> <span class="hl_number">1#</span> + <span class="hl_number">2#</span><br><br><span class="hl_keyword">los</span> numeritos <span class="hl_keyword">son</span> [<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>, <span class="hl_number">4#</span>]</div></div> </div>  <p>Podés cargar las definiciones en modo interactivo pasando la opción <tt>-i</tt> al intérprete Qriollo:</p>  <pre class="cmdline">$ <span class="user">qr DeclaracionValor.q -i</span>
qriollo&gt; <span class="user">fruta</span>
"Manzana"
    de Texto
qriollo&gt; <span class="user">tres</span>
3#
    de Numerito</pre>  <p>El intérprete te indica el resultado, y también te indica su tipo (<span class="inline_code">Texto</span> en el caso de <span class="inline_code"><span class="hl_string">"Manzana"</span></span> y <span class="inline_code">Numerito</span> en el caso de <span class="inline_code"><span class="hl_number">3#</span></span>).</p>  <h3><a name="doc_2">Punto de entrada del programa (el programa...)</a></h3>   <p>Para que podás ejecutar un programa independiente, o compilarlo, tenés que incluir un punto de entrada, que es la definición del valor <span class="inline_code">programa</span>. Verbigracia:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/NumerosHasta.q" target="popup">NumerosHasta.q</a><div id="Ejemplo_NumerosHasta" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;escupir (mostrar (númerosHasta <span class="hl_number">10</span>))<br><br><span class="hl_keyword">los</span> númerosHasta<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> <span class="hl_number">0#</span> <span class="hl_keyword">da</span> [] <br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n&nbsp;&nbsp;<span class="hl_keyword">da</span> númerosHasta (n - <span class="hl_number">1#</span>) ++ [n]</div></div> </div> <pre class="cmdline">$ <span class="user">qr NumerosHasta.q</span>
[1#, 2#, 3#, 4#, 5#, 6#, 7#, 8#, 9#, 10#]</pre>  <h3><a name="doc_3">Declaración y uso de funciones (el...dado...da...)</a></h3>   <p>Podés definir funciones directamente utilizando otra forma de definición: "<span class="inline_code"><span class="hl_keyword">la</span> &lt;función&gt; <span class="hl_keyword">dado</span> &lt;parámetros&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</span>". Igual que antes, podés escribir indistintamente <span class="inline_code"><span class="hl_keyword">dado</span></span>, <span class="inline_code"><span class="hl_keyword">dada</span></span>, <span class="inline_code"><span class="hl_keyword">dados</span></span> o <span class="inline_code"><span class="hl_keyword">dadas</span></span>, siempre prefiriendo la forma eufónica en contexto. Como es habitual en los lenguajes funcionales gringos, las funciones las definís al chimichurri y la aplicación de funciones la denotás con la yuxtaposición. La aplicación es asociativa a izquierda.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Doble.q" target="popup">Doble.q</a><div id="Ejemplo_Doble" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> doble <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> <span class="hl_number">2#</span> * x<br><br><span class="hl_keyword">el</span> dosVeces <span class="hl_keyword">dados</span> f x <span class="hl_keyword">da</span> f (f x)<br><br><span class="hl_keyword">el</span> cuádruple <span class="hl_keyword">es</span> dosVeces doble</div></div> </div>  <pre class="cmdline">$ <span class="user">qr Doble.q -i</span>
qriollo&gt; <span class="user">cuádruple 10#</span>
40#
    de Numerito</pre>  <h3><a name="doc_4">Definición de los tipos de datos algebraicos (un...es...bien...)</a></h3>   <p>Podés definir un tipo algebraico con la sintaxis:</p> <div id="def_tipos_algebraicos" class="code"><span class="hl_keyword">un</span> &lt;tipo&gt; <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> &lt;constructor&gt; &lt;tipos_parámetros&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> &lt;constructor&gt; &lt;tipos_parámetros&gt;</div> <p>Como siempre, podés usar cualquiera de los artículos <span class="inline_code"><span class="hl_keyword">un</span></span>, <span class="inline_code"><span class="hl_keyword">una</span></span>, <span class="inline_code"><span class="hl_keyword">unos</span></span> o <span class="inline_code"><span class="hl_keyword">unas</span></span>. Los tipos los podés poner parámetricos (por ejemplo "<span class="inline_code">Árbol <span class="hl_keyword">de</span> Numerito</span>"), en cuyo caso la sintaxis para que los declarés es:</p> <div id="def_tipos_algebraicos_con_parametros" class="code"><span class="hl_keyword">un</span> &lt;tipo&gt; <span class="hl_keyword">de</span> &lt;parámetros&gt; <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> &lt;constructor&gt; &lt;tipos_parámetros&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> &lt;constructor&gt; &lt;tipos_parámetros&gt;</div>  <p>Un ejemplo de un tipo algebraico que no tiene parámetros es:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/DefExpresion.q" target="popup">DefExpresion.q</a><div id="Ejemplo_DefExpresion" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">una</span> Expresión <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Constante Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Sumar Expresión Expresión<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Multiplicar Expresión Expresión</div></div> </div>  <p>Si levantás esta definición y evaluás la expresión <span class="inline_code">Constante <span class="hl_number">10#</span></span>, vas a obtener un error que te indica que el tipo <span class="inline_code">Expresión</span> no tiene la cualidad <span class="inline_code">Mostrable</span>, que le permite a Qriollo convertirlo en un texto para escupir:</p>  <pre class="cmdline">$ <span class="user">qr DefExpresion.q -i</span>
qriollo&gt; <span class="user">Constante 10#</span>
<span class="errmsg">Se te escapó la tortuga.</span>
<span class="errmsg"></span>
<span class="errmsg">Esto no tipa ni en pedo.</span>
<span class="errmsg">El tipo del argumento no coincide con el tipo esperado por la función.</span>
<span class="errmsg">No hay una instancia declarada para Mostrable para Expresión</span></pre>  <p>Pero podés cargar el archivo y preguntarle cuál es el tipo de una expresión, anteponiendo <span class="inline_code">:t</span> como sigue:</p>  <pre class="cmdline">$ <span class="user">qr DefExpresion.q -i</span>
qriollo&gt; <span class="user">:t Constante</span>
    de Numerito en Expresión
qriollo&gt; <span class="user">:t Constante 10#</span>
    de Expresión
qriollo&gt; <span class="user">:t Sumar</span>
    de Expresión en Expresión en Expresión
qriollo&gt; <span class="user">:t Sumar (Constante 10#)</span>
    de Expresión en Expresión
qriollo&gt; <span class="user">:t Sumar (Constante 10#) (Constante 10#)</span>
    de Expresión</pre>  <p>Un ejemplo de tipo algebraico con parámetros es:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/DefArbol.q" target="popup">DefArbol.q</a><div id="Ejemplo_DefArbol" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">un</span> Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Hoja tipoHoja<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Nodo tipoNodo<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja)</div></div> </div>  <p>Las variables de tipo que Qriollo no instancia durante el proceso de inferencia te las muestra como <tt>?&lt;numerito&gt;</tt>.</p>  <pre class="cmdline">$ <span class="user">qr DefArbol.q -i</span>
qriollo&gt; <span class="user">:t Hoja</span>
    de ?1415 en Árbol de ?1416 ?1415 
qriollo&gt; <span class="user">:t Hoja 10#</span>
    de Árbol de ?1416 Numerito
qriollo&gt; <span class="user">:t Nodo 'a' (Hoja 10#)</span>
    de (Árbol de Letra Numerito) en Árbol de Letra Numerito
qriollo&gt; <span class="user">:t Nodo 'a' (Hoja 10#) (Hoja 10#)</span>
    de Árbol de Letra Numerito</pre>  <h3><a name="doc_5">Declaración de funciones por análisis de casos (el...dado...da...dado...da...)</a></h3>   <p>Las funciones las podés definir por casos haciendo comparación de patrones, utilizando la sintaxis:</p> <div id="decl_funciones_por_comparacion_de_patrones" class="code"><span class="hl_keyword">la</span> &lt;función&gt;<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> &lt;patrones&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> &lt;patrones&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</div> <p><span class="inline_code">&lt;patrones&gt;</span> debe ser una lista de patrones, uno por cada parámetro que la función espera. Cada patrón puede ser un comodín (que lo escribís con un guión bajo "_"), una variable (un nombre que lo podés vincular a cualquier valor), o una aplicación de un constructor a una lista de patrones.</p>  <p>Ponele, la suma de los valores que están en los nodos de un árbol como el de arriba la podés definir como sigue:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/SumaArbol.q" target="popup">SumaArbol.q</a><div id="Ejemplo_SumaArbol" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">un</span> Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Hoja tipoHoja<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Nodo tipoNodo<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Árbol <span class="hl_keyword">de</span> tipoNodo tipoHoja)<br><br><span class="hl_keyword">la</span> suma_de_los_nodos<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (Hoja n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> n<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Nodo n izq der) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;n + suma_de_los_nodos izq<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ suma_de_los_nodos der</div></div> </div>  <pre>$ <span class="user">qr SumaArbol -i</span>
qriollo&gt; <span class="user">suma_de_los_nodos (Nodo 1# (Hoja 2#) (Hoja 3#))</span>
6#
    de Numerito</pre>  <p>Podés hacer comparación de patrones con constantes (letras, numeritos), tipos algebraicos nativos qriollos (tuplas, listas), y constructores de tipos de datos algebraicos. El patrón "_" (guión bajo) representa un comodín que puede coincidir con cualquier estructura que recibás, y no le da valor a ningún nombre. El mismo nombre no lo podés meter dos veces en un patrón. El análisis de casos tiene que ser exhaustivo. Los patrones los podés anidar a una profundidad arbitraria. Si el patrón no es atómico lo tenés que encerrar entre paréntesis. </p>  <p><strong>Ejemplo de tipos de datos algebraicos existentes:</strong></p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/PatPosta.q" target="popup">PatPosta.q</a><div id="Ejemplo_PatPosta" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> neg<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> Sí <span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> No <span class="hl_keyword">da</span> Sí<br><br><span class="hl_keyword">la</span> conj<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> Sí Sí <span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _&nbsp;&nbsp;_&nbsp;&nbsp;<span class="hl_keyword">da</span> No</div></div> </div> <pre>$ <span class="user">qr PatPosta -i</span>
qriollo&gt; <span class="user">conj (neg No) (neg No)</span>
Sí
    de Posta</pre>  <p><strong>Ejemplo de patrones anidados con tuplas y numeritos:</strong></p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/PatTupla.q" target="popup">PatTupla.q</a><div id="Ejemplo_PatTupla" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> máximo_común_divisor<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (a, <span class="hl_number">0#</span>) <span class="hl_keyword">da</span> a<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (a, b)&nbsp;&nbsp;<span class="hl_keyword">da</span> máximo_común_divisor (b, a % b)</div></div> </div> <pre>$ <span class="user">qr PatTupla -i</span>
qriollo&gt; <span class="user">máximo_común_divisor (100#, 60#)</span>
20#
    de Numerito</pre>  <p>Tené re en cuenta que si querés definir esta función de manera bien qriolla tenés que usar su variante al chimichurri, recibiendo dos parámetros de tipo <span class="inline_code">Numerito</span> en vez de un solo parámetro de tipo <span class="inline_code">(Numerito, Numerito)</span>.</p>  <p><strong>Ejemplo de patrones con dos listas:</strong></p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/PatLista.q" target="popup">PatLista.q</a><div id="Ejemplo_PatLista" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> emparejar<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (_ : _)&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (x : xs) (y : ys) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;(x, y) : emparejar xs ys</div></div> </div> <pre>$ <span class="user">qr PatLista -i</span>
qriollo&gt; <span class="user">emparejar [1#, 2#, 3#] ['a', 'b', 'c']</span>
[(1#, 'a'), (2#, 'b'), (3#, 'c')]
    de [(Numerito, Letra)]</pre>  <h3><a name="doc_6">Coincidencia de patrones (mirar...si...boludo)</a></h3>   <p>Y si no, podés usar una expresión <span class="inline_code"><span class="hl_structure">mirar</span>...<span class="hl_structure">boludo</span></span> para hacer análisis de casos por comparación de patrones. A diferencia de la construcción anterior, en la que la comparación de patrones es parte de la sintaxis de una definición de función, <span class="inline_code"><span class="hl_structure">mirar</span>...<span class="hl_structure">boludo</span></span> es una expresión que (como cualquier expresión) la podés usar para formar expresiones más grandes, y no hace falta que introduzcás una definición:</p>  <div id="expresion_comparacion_de_patrones" class="code"><span class="hl_structure">mirar</span> &lt;expresión&gt;<br>&nbsp;&nbsp;<span class="hl_keyword">si</span> &lt;patrón&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">si</span> &lt;patrón&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;[<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> &lt;resultado&gt;]<br><span class="hl_structure">boludo</span></div>  <p>La cláusula "<span class="inline_code"><span class="hl_keyword">si</span> <span class="hl_keyword">no</span></span>" la podés meter si querés, y si no querés no, y representa el resultado predeterminado por omisión de analizar los casos. Igual que cuando definís funciones por análisis de casos, la cobertura de los casos la tenés que hacer exhaustiva.</p>  <p>En lo que refiere al resaltado de sintaxis, todas las palabras clave que te las resalta en verde sirven para marcar que empieza una estructura que la tenés que cerrar con un correspondiente <span class="inline_code"><span class="hl_structure">boludo</span></span> (o <span class="inline_code"><span class="hl_structure">boluda</span></span>). Excepto, claro está, en el caso de la palabra clave <span class="inline_code"><span class="hl_structure">boludo</span></span>, que no requiere que pongás un <span class="inline_code"><span class="hl_structure">boludo</span></span> posterior.</p>  <p><strong>Ejemplo de análisis de casos con constantes:</strong></p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/MirarDigitos.q" target="popup">MirarDigitos.q</a><div id="Ejemplo_MirarDigitos" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> escupir_dígito<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;escupir (<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">0#</span> <span class="hl_keyword">da</span> <span class="hl_string">"cero"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">1#</span> <span class="hl_keyword">da</span> <span class="hl_string">"uno"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">2#</span> <span class="hl_keyword">da</span> <span class="hl_string">"dos"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">3#</span> <span class="hl_keyword">da</span> <span class="hl_string">"tres"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">4#</span> <span class="hl_keyword">da</span> <span class="hl_string">"cuatro"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">5#</span> <span class="hl_keyword">da</span> <span class="hl_string">"cinco"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">6#</span> <span class="hl_keyword">da</span> <span class="hl_string">"seis"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">7#</span> <span class="hl_keyword">da</span> <span class="hl_string">"siete"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">8#</span> <span class="hl_keyword">da</span> <span class="hl_string">"ocho"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_number">9#</span> <span class="hl_keyword">da</span> <span class="hl_string">"nueve"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> <span class="hl_string">"dígito incorrecto"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;)</div></div> </div> <pre>$ <span class="user">qr MirarDigitos -i</span>
qriollo&gt; <span class="user">escupir_dígito 3#</span>
tres
()
    de ()</pre>  <p>Fijate que la función <span class="inline_code">escupir_dígito</span> definida arriba te devuelve el valor <span class="inline_code">()</span> de tipo <span class="inline_code">()</span>, que corresponde a la tupla 0-aria o al valor <span class="inline_code">unit</span> tradicional en lenguajes funcionales gringos, pero además tiene el efecto colateral de escupirte el texto <span class="inline_code"><span class="hl_string">"tres"</span></span> en la salida estándar.</p>  <p><strong>Ejemplo de análisis de casos con patrones anidados:</strong></p>  <p>Determinar el mínimo de una lista.</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/MirarMinimo.q" target="popup">MirarMinimo.q</a><div id="Ejemplo_MirarMinimo" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> mínimo <span class="hl_keyword">dada</span> lista <span class="hl_keyword">da</span><br>&nbsp;&nbsp;<span class="hl_structure">mirar</span> lista<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> []&nbsp;&nbsp;<span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"La lista vacía no tiene mínimo.<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> [x] <span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x : y : xs <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> x &lt; y<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Sí <span class="hl_keyword">da</span> mínimo (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> mínimo (y : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span> <br>&nbsp;&nbsp;<span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr MirarMinimo -i</span>
qriollo&gt; <span class="user">mínimo [10#, 9#, 8#, 7#, 11#, 12#]</span>
7#
    de Numerito</pre>  <p>Una manera más qriolla de definir esta función te la mostramos en los párrafos que siguen más abajo, usando guardas condicionales.</p>  <h3><a name="doc_7">Guardas condicionales (dado...si...da...si no da...)</a></h3>   <p>Cuando usás una cláusula <span class="inline_code"><span class="hl_keyword">dado</span>...<span class="hl_keyword">da</span>...</span> de las que forman parte de las definiciones de funciones por análisis de casos, podés meter una secuencia de guardas condicionales:</p>  <div id="guardas_condicionales" class="code"><span class="hl_keyword">dados</span> &lt;patrones&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> &lt;condición&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> &lt;condición&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> &lt;resultado&gt;</div>  <p>Fijate que en este caso el "<span class="inline_code"><span class="hl_keyword">si</span> <span class="hl_keyword">no</span></span>" lo tenés que poner sí o sí.</p> <p>Ponele, si querés determinar el mínimo de una lista:</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/MirarMinimo2.q" target="popup">MirarMinimo2.q</a><div id="Ejemplo_MirarMinimo2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> mínimo<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [] <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"La lista vacía no tiene mínimo.<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [x] <span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : y : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x &lt; y <span class="hl_keyword">da</span> mínimo (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> mínimo (y : xs)</div></div> </div>  <p><strong>Nota:</strong> una vez que la expresión a evaluar la comparó exitosamente con el patrón, Qriollo agarra esa rama, a diferencia de lo que pasa en otros lenguajes gringos como Haskell. Las condiciones adentro de una cláusula <span class="inline_code"><span class="hl_keyword">dado</span>...<span class="hl_keyword">si</span>...<span class="hl_keyword">da</span>...<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>...<span class="hl_keyword">da</span></span> las evalúa secuencialmente.</p>   <h3><a name="doc_8">Funciones anónimas (la que dado...da)</a></h3>   <p>Podés declarar funciones anónimas mediante la expresión:</p> <div id="funciones_anonimas_1" class="code"><span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> &lt;parámetro&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</div> <p>La construcción te acepta varios parámetros:</p> <div id="funciones_anonimas_2" class="code"><span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dados</span> &lt;parámetros&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</div> <p>Y más en general te acepta que pongás un análisis de casos con guardas condicionales como cualquier función:</p> <div id="funciones_anonimas_3" class="code"><span class="hl_keyword">la</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> &lt;parámetros&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> &lt;parámetros&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</div>  <p>Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Anonimas1.q" target="popup">Anonimas1.q</a><div id="Ejemplo_Anonimas1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> aplicar123<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> f <span class="hl_keyword">da</span> [f <span class="hl_number">1#</span>, f <span class="hl_number">2#</span>, f <span class="hl_number">3#</span>]<br><br><span class="hl_keyword">el</span> aplicarL<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> m b<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> aplicar123 (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> m * x + b)</div></div> </div> <pre>$ <span class="user">qr Anonimas1 -i</span>
qriollo&gt; <span class="user">aplicarL 2# 1#</span>
[3#, 5#, 7#]
    de [Numerito]</pre>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Anonimas2.q" target="popup">Anonimas2.q</a><div id="Ejemplo_Anonimas2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> it<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> z p f<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> p z <span class="hl_keyword">da</span> [z]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;<span class="hl_keyword">da</span> z : it (f z) p f<br><br><span class="hl_keyword">la</span> conjetura_de_Collatz <span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;it n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span> n == <span class="hl_number">1#</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> n % <span class="hl_number">2#</span> == <span class="hl_number">0#</span> <span class="hl_keyword">da</span> n / <span class="hl_number">2#</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_number">3#</span> * n + <span class="hl_number">1#</span>)</div></div> </div> <pre>$ <span class="user">qr Anonimas2 -i</span>
qriollo&gt; <span class="user">conjetura_de_Collatz 3#</span>
[3#, 10#, 5#, 16#, 8#, 4#, 2#, 1#]
    de [Numerito]</pre>  <h3><a name="doc_9">Declaraciones locales (donde...boludo)</a></h3>   <p>Cada cláusula <span class="inline_code"><span class="hl_keyword">dado</span>...<span class="hl_keyword">da</span>...</span>, igual que su variante con guardas condicionales, te acepta que metás una secuencia de declaraciones locales:</p> <div id="declaraciones_locales_con_donde" class="code"><span class="hl_keyword">dados</span> &lt;patrones&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;&lt;declaración&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;&lt;declaración&gt;<br><span class="hl_structure">boludo</span></div>  <p>Cada una de ellas es una declaración de un valor simple (<span class="inline_code"><span class="hl_keyword">el</span> &lt;nombre&gt; <span class="hl_keyword">es</span> &lt;valor&gt;</span>) o de una función (<span class="inline_code"><span class="hl_keyword">la</span> &lt;función&gt; <span class="hl_keyword">dados</span> &lt;patrones&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;</span>), posiblemente con guardas condicionales, y posiblemente también con declaraciones locales anidadas. Como Qriollo usa evaluación estricta, los valores que le diste a cada una de las declaraciones locales las evalúa antes de evaluar el cuerpo (resultado).</p>  <p><strong>Ejemplo:</strong></p>  <p>Escribir un número natural <i>n</i> en base <i>b</i>:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Base.q" target="popup">Base.q</a><div id="Ejemplo_Base" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> en_base<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> b n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> n == <span class="hl_number">0#</span> <span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> r () ++ [d]<br>&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> d <span class="hl_keyword">es</span> n % b<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> r <span class="hl_keyword">dado</span> _ <span class="hl_keyword">da</span> en_base b (n / b)<br>&nbsp;&nbsp;<span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr Base -i</span>
qriollo&gt; <span class="user">en_base 2# 999999#</span>
[1#, 1#, 1#, 1#, 0#, 1#, 0#, 0#, 0#, 0#, 1#, 0#, 0#, 0#, 1#, 1#, 1#, 1#, 1#, 1#]
    de [Numerito]</pre>  <p>Las declaraciones que las introducís con una cláusula <span class="inline_code"><span class="hl_structure">donde</span>...<span class="hl_structure">boludo</span></span> las podés hacer recursivas y mutuamente recursivas.</p>  <h3><a name="doc_10">Declaraciones locales (ponele que...en)</a></h3>   <p>También podés introducir declaraciones locales como expresiones, igual que como en el <span class="inline_code">letrec</span> gringo:</p>  <div id="declaraciones_locales_con_ponele" class="code"><span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&lt;declaración&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;&lt;declaración&gt;<br><span class="hl_keyword">en</span><br>&nbsp;&nbsp;&lt;cuerpo&gt;</div>  <p>Ponele, el algoritmo para <a href="https://en.wikipedia.org/wiki/Merge_sort">incorpordenar</a> una lista:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Incorpordenar.q" target="popup">Incorpordenar.q</a><div id="Ejemplo_Incorpordenar" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> incorpordenar<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> []&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [x] <span class="hl_keyword">da</span> [x]<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> lista <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> tamaño&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> longitud lista<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> mitá&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> tamaño / <span class="hl_number">2</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> primera_mitá <span class="hl_keyword">es</span> agarrar mitá lista<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> segunda_mitá <span class="hl_keyword">es</span> tirar mitá lista<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incorporar (incorpordenar primera_mitá)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(incorpordenar segunda_mitá)<br><br><span class="hl_keyword">el</span> incorporar<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ys <span class="hl_keyword">da</span> ys<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (x : xs) [] <span class="hl_keyword">da</span> (x : xs)<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (x : xs) (y : ys)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x &lt; y <span class="hl_keyword">da</span> x : incorporar xs (y : ys)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> y : incorporar (x : xs) ys<br><br><span class="hl_keyword">la</span> longitud<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_number">0#</span><br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (_:xs) <span class="hl_keyword">da</span> <span class="hl_number">1#</span> + longitud xs<br><br><span class="hl_keyword">el</span> agarrar<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> <span class="hl_number">0#</span> _&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> n&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> n&nbsp;&nbsp;(x:xs) <span class="hl_keyword">da</span> x : agarrar (n - <span class="hl_number">1</span>) xs<br><br><span class="hl_keyword">el</span> tirar<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> <span class="hl_number">0#</span> xs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> xs<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> n&nbsp;&nbsp;(_:xs) <span class="hl_keyword">da</span> tirar (n - <span class="hl_number">1</span>) xs<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;escupir . mostrar . incorpordenar $<br>&nbsp;&nbsp;&nbsp;&nbsp;[<span class="hl_number">70#</span>, <span class="hl_number">78#</span>, <span class="hl_number">24#</span>, <span class="hl_number">47#</span>, <span class="hl_number">63#</span>, <span class="hl_number">36#</span>, <span class="hl_number">5#</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">96#</span>, <span class="hl_number">54#</span>, <span class="hl_number">86#</span>, <span class="hl_number">30#</span>, <span class="hl_number">95#</span>, <span class="hl_number">0#</span>, <span class="hl_number">25#</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">18#</span>, <span class="hl_number">18#</span>, <span class="hl_number">73#</span>, <span class="hl_number">96#</span>, <span class="hl_number">1#</span>, <span class="hl_number">1#</span>]</div></div> </div> <pre>$ <span class="user">qr Incorpordenar -i</span>
[0#, 1#, 1#, 5#, 18#, 18#, 24#, 25#, 30#, 36#, 47#,
 54#, 63#, 70#, 73#, 78#, 86#, 95#, 96#, 96#]</pre>   <h3><a name="doc_11">Tipos y anotaciones de tipos (...de...)</a></h3>   <p>Qriollo tiene tipos básicos ya predefinidos en el lenguaje (<span class="inline_code">Posta</span>, <span class="inline_code">Numerito</span>, <span class="inline_code">Letra</span>, etc.), y tipos definidos por vos. Por ahora no tiene un mecanismo implementado para definir alias (o renombres) de tipos.</p>  <p>En todas las definiciones de valores ("<span class="inline_code"><span class="hl_keyword">el</span> &lt;nombre&gt; <span class="hl_keyword">es</span> ...</span>") y de funciones ("<span class="inline_code"><span class="hl_keyword">la</span> &lt;función&gt; <span class="hl_keyword">dado</span> ...</span>") podés declarar explícitamente sus tipos, escribiendo, respectivamente "<span class="inline_code"><span class="hl_keyword">el</span> &lt;nombre&gt; <span class="hl_keyword">de</span> &lt;tipo&gt; <span class="hl_keyword">es</span> ...</span>" y "<span class="inline_code"><span class="hl_keyword">la</span> &lt;función&gt; <span class="hl_keyword">de</span> &lt;tipo&gt; <span class="hl_keyword">dado</span> ...</span>".</p>  <p><strong>El tipo de las funciones</strong></p>  <p>El tipo de las funciones es el tipo más importante en un lenguaje funcional como Qriollo. Si <span class="inline_code">fulano</span> es un tipo y <span class="inline_code">mengano</span> es otro tipo, entonces <span class="inline_code">(fulano <span class="hl_keyword">en</span> mengano)</span> es el tipo de las funciones que reciben fulanos y devuelven menganos. El constructor infijo binario <span class="inline_code"><span class="hl_keyword">en</span></span> es asociativo a derecha, como siempre pasa en los lenguajes funcionales gringos, y de esta manera "<span class="inline_code">coso <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> coso</span>" es el mismo tipo que "<span class="inline_code">coso <span class="hl_keyword">en</span> (coso <span class="hl_keyword">en</span> (coso <span class="hl_keyword">en</span> coso))</span>".<br>  <p><strong>El tipo <span class="inline_code">Posta</span></strong></p> <p>Tiene dos constructores: <span class="inline_code">Sí</span> y <span class="inline_code">No</span>. La manera de usarlos es que les hagás análisis de casos por comparación de patrones, o que usés una estructura condicional, como vas a ver después.</p>  <p>Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Logica1.q" target="popup">Logica1.q</a><div id="Ejemplo_Logica1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> y <span class="hl_keyword">de</span> Posta <span class="hl_keyword">en</span> Posta <span class="hl_keyword">en</span> Posta <br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> Sí Sí <span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> Sí No <span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> No Sí <span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> No No <span class="hl_keyword">da</span> No<br><br><span class="hl_keyword">el</span> o <span class="hl_keyword">de</span> Posta <span class="hl_keyword">en</span> Posta <span class="hl_keyword">en</span> Posta <br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> Sí Sí <span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> Sí No <span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> No Sí <span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> No No <span class="hl_keyword">da</span> No<br><br><span class="hl_keyword">el</span> neg <span class="hl_keyword">de</span> Posta <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> Sí <span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> No <span class="hl_keyword">da</span> Sí</div></div> </div> <pre>$ <span class="user">qr Logica1 -i</span>
qriollo&gt; <span class="user">o (neg Sí) (neg (y No Sí))</span>
Sí
    de Posta</pre>  <p><strong>El tipo <span class="inline_code">Numerito</span></strong></p> <p>Tiene 2<sup>32</sup> constructores, que los notás <span class="inline_code"><span class="hl_number">0#</span></span>, <span class="inline_code"><span class="hl_number">1#</span></span>, <span class="inline_code"><span class="hl_number">2#</span></span>, ..., <span class="inline_code"><span class="hl_number">4294967295#</span></span>. Ojo, la sintaxis sin el cardinal (<span class="inline_code"><span class="hl_number">0</span></span>, <span class="inline_code"><span class="hl_number">1</span></span>, <span class="inline_code"><span class="hl_number">2</span></span>, ...) está reservada para representar valores genéricos de tipos de datos que encarnen la cualidad <span class="inline_code">Digital</span>, o sea que tengan una operación para transformar un número natural cualquiera en un elemento del tipo. Como caso particular, el tipo de datos <span class="inline_code">Numerito</span> encarna la cualidad <span class="inline_code">Digital</span>, lo que permite que escribás <span class="inline_code"><span class="hl_number">0</span></span> para representar el numerito <span class="inline_code"><span class="hl_number">0#</span></span>, <span class="inline_code"><span class="hl_number">1</span></span> para representar el numerito <span class="inline_code"><span class="hl_number">1#</span></span>, y así sucesivamente.</p>  <p>Qriollo por el momento no tiene soporte léxico para que escribás constantes numéricas de ninguna manera alternativa, como por ejemplo, constantes numéricas en distintas bases de numeración.</p>  <p>Los numeritos los podés usar haciendo análisis de casos con sus valores comparandolós con patrones, o mediante los operadores aritméticos y relacionales:<br> <table> <tr> <td>-Expresión-</td><td>-Resultado-</td><td>-Significado-</td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> + <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">13#</span></span></td><td><em>suma</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> - <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">7#</span></span> </td><td><em>resta</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> * <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">30#</span></span></td><td><em>producto</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> / <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">3#</span></span></td><td><em>división entera</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> % <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">1#</span></span></td><td><em>resto en la división</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> ** <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">1000#</span></span></td><td><em>potencia</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> &amp; <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">2#</span></span></td><td><em>"y" bit a bit</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> | <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">11#</span></span></td><td><em>"o" bit a bit</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> ^ <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">9#</span></span></td><td><em>"xor" bit a bit</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> == <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">No</span></td><td><em>comparación por igual</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> != <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">Sí</span></td><td><em>comparación por distinto</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> &lt; <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">No</span></td><td><em>comparación por menor</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> &gt; <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">Sí</span></td><td><em>comparación por mayor</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> &lt;= <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">No</span></td><td><em>comparación por menor o igual</em></td> </tr> <tr> <td><span class="inline_code"><span class="hl_number">10#</span> &gt;= <span class="hl_number">3#</span></span></td><td> =&gt; <span class="inline_code">Sí</span></td><td><em>comparación por mayor o igual</em></td> </tr> <tr> <td><span class="inline_code">~<span class="hl_number">10#</span></span></td><td> =&gt; <span class="inline_code"><span class="hl_number">4294967285#</span></span></td><td><em>complemento bit a bit</em></td> </tr> </table> </p>  <p>Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Aritmetica.q" target="popup">Aritmetica.q</a><div id="Ejemplo_Aritmetica" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> factorial <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> <span class="hl_number">0#</span> <span class="hl_keyword">da</span> <span class="hl_number">1#</span><br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n&nbsp;&nbsp;<span class="hl_keyword">da</span> n * factorial (n - <span class="hl_number">1#</span>)<br><br><span class="hl_keyword">el</span> es_par <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span> n & <span class="hl_number">1#</span> == <span class="hl_number">0#</span></div></div> </div> <pre>$ <span class="user">qr Aritmetica -i</span>
qriollo&gt; <span class="user">factorial 7#</span>
5040#
    de Numerito
qriollo&gt; <span class="user">es_par (factorial 1#)</span>
No
    de Posta</pre>  <p><strong>El tipo <span class="inline_code">Letra</span></strong></p>  <p>Tiene un montón de constructores, tantos como códigos de punto <a href="https://en.wikipedia.org/wiki/Unicode">Unicode</a>. Los valores de tipo <span class="inline_code">Letra</span> son <span class="inline_code"><span class="hl_string">'a'</span></span>, <span class="inline_code"><span class="hl_string">'b'</span></span>, <span class="inline_code"><span class="hl_string">'c'</span></span>, etcétera, donde el caracter Unicode lo metés encerrado entre dos comillas simples. Por ahora la única sintaxis léxica permitida para que ingresés constantes de tipo <span class="inline_code">Letra</span> es que las escribás literalmente en el archivo fuente de Qriollo, que Qriollo te lo presume codificado en <a href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a>. Además, te soporta algunas secuencias de escape:</p>  <table> <tr><td>-Escape-</td><td>-Código-</td><td>-Letra-</td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\a</span>'</span></span></td><td>7</td><td><em>campanita</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\b</span>'</span></span></td><td>8</td><td><em>backspace</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\f</span>'</span></span></td><td>12</td><td><em>salto de página</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\t</span>'</span></span></td><td>9</td><td><em>tab</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\v</span>'</span></span></td><td>11</td><td><em>tab vertical</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\n</span>'</span></span></td><td>10</td><td><em>salto de línea</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\r</span>'</span></span></td><td>13</td><td><em>retorno de carro</em></td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\"</span>'</span></span></td><td>34</td><td><em>comilla doble</em> (")</td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\'</span>'</span></span></td><td>39</td><td><em>comilla simple</em> (')</td></tr> <tr><td><span class="inline_code"><span class="hl_string">'<span class="hl_escape">\\</span>'</span></span></td><td>92</td><td><em>contrabarra</em> (\)</td></tr> </table>  <p>El soporte para Unicode por ahora tiene algunos caprichos y limitaciones. Los caracteres los podés utilizar haciendo análisis de casos por comparación de patrones, y también mediante las funciones <span class="inline_code">letra_a_numerito</span> que convierte una letra en su código de punto Unicode, y <span class="inline_code">numerito_a_letra</span> que es la operación inversa.</p>  <p>Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Letras.q" target="popup">Letras.q</a><div id="Ejemplo_Letras" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">la</span> siguiente_letra <span class="hl_keyword">de</span> Letra <span class="hl_keyword">en</span> Letra<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> x <span class="hl_keyword">da</span> numerito_a_letra (letra_a_numerito x + <span class="hl_number">1</span>)</div></div> </div> <pre>$ <span class="user">qr Letras -i</span>
qriollo&gt; <span class="user">siguiente_letra (siguiente_letra 'a')</span>
'c'
    de Letra</pre>  <p><strong>El tipo <span class="inline_code">Lista</span></strong></p>  <p>Si <span class="inline_code">fulano</span> es un tipo, entonces <span class="inline_code">[fulano] </span> es el tipo de las listas que contienen fulanos. La sintaxis para literales de tipo lista es: <span class="inline_code">[elemento<sub><span class="hl_number">1</span></sub>, elemento<sub><span class="hl_number">2</span></sub>, ..., elemento<sub>n</sub>] </span>. Podés no poner ningún elemento, y en ese caso te lo entiende como la lista vacía ( [] ). También te admite omitir o escribir la coma final. Ponele, <span class="inline_code">[<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>] </span> y <span class="inline_code">[<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>,] </span> son dos expresiones que representan la misma lista de numeritos. De hecho son dos maneras que tenés de escribir la misma expresión. Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/InvertirLista.q" target="popup">InvertirLista.q</a><div id="Ejemplo_InvertirLista" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> invertir<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> [] <br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : xs) <span class="hl_keyword">da</span> agregar_al_final x (invertir xs)<br><br><span class="hl_keyword">el</span> agregar_al_final<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> [x]<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x (y:ys) <span class="hl_keyword">da</span> y : agregar_al_final x ys</div></div> </div> <pre>$ <span class="user">qr InvertirLista -i</span>
qriollo&gt; <span class="user">invertir [1#, 2#, 3#]</span>
[3#, 2#, 1#]
    de [Numerito]</pre>  <p><strong>Los tipos de las <i>n</i>-uplas</strong></p>  <p>Qriollo tiene un tipo para las tuplas de <i>n</i> elementos, donde acá <i>n</i> puede ser 0 o un número natural mayor que 1. Si fulano<sub>1</sub>, fulano<sub>2</sub>, ..., y fulano<sub>n</sub> son tipos, entonces (fulano<sub>1</sub>, fulano<sub>2</sub>, ..., fulano<sub>n</sub>) es el tipo de las <i>n</i>-uplas cuyo <i>i</i>-ésimo elemento es de tipo fulano<sub>i</sub>.</p>  <p>En el caso particular en el que <i>n = 0</i>, tenés el tipo unitario de las 0-uplas que lo escribís () y tenés un único valor también escrito (). El valor () lo podés usar de manera convencional como valor que devolvés cuando el que el resultado de un cómputo no importa, como cuando querés usar operaciones que tienen efectos colaterales. Ponele:</p> <pre>qriollo&gt; <span class="user">escupir "Hola mundo\n"</span>
Hola mundo
()
    de ()</pre> <p>La operación <span class="inline_code">escupir</span> le das un texto y te lo escupe por la salida estándar. Además, devuelve el valor <span class="inline_code">()</span> que tiene tipo <span class="inline_code">()</span>.</p>  <p>La manera que tenés de usar las <i>n</i>-uplas es que hagás análisis de casos por comparación de patrones. Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/SumarPares.q" target="popup">SumarPares.q</a><div id="Ejemplo_SumarPares" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> sumar_pares <span class="hl_keyword">de</span> (Numerito, Numerito)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> (Numerito, Numerito)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> (Numerito, Numerito)<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (x1, y1)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x2, y2)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> (x1 + x2, y1 + y2)</div></div> </div> <pre>$ <span class="user">qr SumarPares -i</span>
qriollo&gt; <span class="user">sumar_pares (1#, 2#) (10#, 20#)</span>
(11#, 22#)
    de (Numerito, Numerito)</pre>  <p><strong>El tipo <span class="inline_code">Texto</span></strong></p>  <p>El tipo <span class="inline_code">Texto</span> te sirve para representar cadenas de texto, que son tiras de letras. El tipo <span class="inline_code">Texto</span> tiene un constructor solo que también se llama <span class="inline_code">Texto</span>, que le das una lista de letras y te devuelve un texto. La manera que tenés de usar los textos es que les hagás análisis de casos por comparación de patrones para acceder a la lista de letras que hay por abajo.</p>  <p>También si querés podés usar la sintaxis más común en los lenguajes gringos: un texto lo delimitás con una comilla doble (") a la izquierda y con otra a la derecha, y a todas las letras del medio las yuxtaponés para formar la lista de letras en cuestión. Las secuencias de escape que te reconoce son las mismas que las que ya dijimos en la sección que le corresponde al tipo <span class="inline_code">Letra</span>. Ponele:</p> <ul> <li><span class="inline_code"><span class="hl_string">"cronopio"</span></span> equivale a <span class="inline_code">(Texto [<span class="hl_string">'c'</span>, <span class="hl_string">'r'</span>, <span class="hl_string">'o'</span>, <span class="hl_string">'n'</span>, <span class="hl_string">'o'</span>, <span class="hl_string">'p'</span>, <span class="hl_string">'i'</span>, <span class="hl_string">'o'</span>])</span>. <li><span class="inline_code"><span class="hl_string">"dije <span class="hl_escape">\"</span>hola<span class="hl_escape">\"</span>"</span></span> equivale a <span class="inline_code">(Texto [<span class="hl_string">'d'</span>, <span class="hl_string">'i'</span>, <span class="hl_string">'j'</span>, <span class="hl_string">'e'</span>, <span class="hl_string">' '</span>, <span class="hl_string">'"'</span>, <span class="hl_string">'h'</span>, <span class="hl_string">'o'</span>, <span class="hl_string">'l'</span>, <span class="hl_string">'a'</span>, <span class="hl_string">'"'</span>])</span>. <li><span class="inline_code"><span class="hl_string">"<span class="hl_escape">\\</span><span class="hl_escape">\"</span>"</span></span> equivale a <span class="inline_code">(Texto [<span class="hl_string">'<span class="hl_escape">\\</span>'</span>, <span class="hl_string">'"'</span>])</span>. <li><span class="inline_code"><span class="hl_string">"a<span class="hl_escape">\n</span>"</span></span> equivale a <span class="inline_code">(Texto [<span class="hl_string">'a'</span>, <span class="hl_string">'<span class="hl_escape">\n</span>'</span>])</span>. <li><span class="inline_code"><span class="hl_string">"a<span class="hl_escape">\\</span>n"</span></span> equivale a <span class="inline_code">(Texto [<span class="hl_string">'a'</span>, <span class="hl_string">'<span class="hl_escape">\\</span>'</span>, <span class="hl_string">'n'</span>])</span>. <li><span class="inline_code"><span class="hl_string">""</span></span> equivale a <span class="inline_code">(Texto [])</span> </ul>  <p>Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/MayusculizarTexto.q" target="popup">MayusculizarTexto.q</a><div id="Ejemplo_MayusculizarTexto" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_comment">OJO. Funciona solamente para letras en ASCII.</span><br><span class="hl_keyword">el</span> mayusculizar_letra <span class="hl_keyword">de</span> Letra <span class="hl_keyword">en</span> Letra<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> l <span class="hl_keyword">da</span> numerito_a_letra (letra_a_numerito l & ~<span class="hl_number">32</span>)<br><br><span class="hl_keyword">el</span> mayusculizar_texto <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> Texto<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> <span class="hl_string">""</span> <span class="hl_keyword">da</span> <span class="hl_string">""</span>&nbsp;&nbsp;<span class="hl_comment">OJO. Caso vacío</span><br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Texto (letra : letras))<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Texto (mayusculizar_letra letra : letras)</div></div> </div> <pre>$ <span class="user">qr MayusculizarTexto -i</span>
qriollo&gt; <span class="user">mayusculizar_texto "hola"</span>
"Hola"
    de Texto</pre>  <p><strong>El tipo <span class="inline_code">Quizá</span></strong></p>  <p>Igual que otros lenguajes gringos, Qriollo te permite que extendás cualquier tipo que querás con un valor distinguido. Si <span class="inline_code">coso</span> es un tipo, <span class="inline_code">Quizá <span class="hl_keyword">de</span> coso</span> es otro tipo cuyos valores son <span class="inline_code">Nada</span>, y un montón de valores que se escriben <span class="inline_code">(Este chabón)</span>, donde <span class="inline_code">chabón</span> puede ser cualquier valor del tipo <span class="inline_code">coso</span>. La manera de que usés el tipo <span class="inline_code">Quizá <span class="hl_keyword">de</span> coso</span> es que hagás análisis de casos por comparación de patrones. Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/QuizaMinimo.q" target="popup">QuizaMinimo.q</a><div id="Ejemplo_QuizaMinimo" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> mín <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> Numerito <span class="hl_keyword">en</span> Numerito<br><span class="hl_keyword">dados</span> x y<br>&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x &lt; y <span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> y<br><br><span class="hl_keyword">el</span> mínimo <span class="hl_keyword">de</span> [Numerito] <span class="hl_keyword">en</span> Quizá <span class="hl_keyword">de</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Nada<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : xs) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> mínimo xs<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Nada&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Este x<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Este y <span class="hl_keyword">da</span> Este (mín x y)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr QuizaMinimo -i</span>
qriollo&gt; <span class="user">mínimo []</span>
Nada
    de Quizá de Numerito
qriollo&gt; <span class="user">mínimo [2#, 1#, 3#]</span>
(Este 1#)
    de Quizá de Numerito</pre>  <p><strong>El tipo <span class="inline_code">Ref</span></strong></p>  <p>Las variables en Qriollo no son cosas asignables: cuando una variable la asociaste a un valor, cagaste: la dejaste asociada a dicho valor para siempre. Por otro lado, los valores en Qriollo son inmutables, y eso quiere decir que no los podés modificar a lo largo del tiempo. La única excepción a esta regla es el tipo de las referencias, que te deja que introduzcás valores mutables de tal manera que vos los controlés.</p>  <p>Si <span class="inline_code">fulano</span> es un tipo, <span class="inline_code">Ref <span class="hl_keyword">de</span> fulano</span> es el tipo de las referencias mutables a valores de tipo <span class="inline_code">fulano</span>. El tipo de las referencias tiene un constructor que también se llama <span class="inline_code">Ref</span>, que le das un valor de tipo <span class="inline_code">fulano</span> y te devuelve una celda mutable que referencia ese valor. Si <span class="inline_code">r</span> es una referencia de tipo <span class="inline_code">Ref <span class="hl_keyword">de</span> fulano</span>, la podés usar de dos maneras: en primer lugar, si ponés la expresión <span class="inline_code">desref r</span> te devuelve el valor de tipo <span class="inline_code">fulano</span> que está siendo referenciado por la celda <span class="inline_code">r</span>. En segundo lugar, si <span class="inline_code">x</span> es cualquier valor de tipo <span class="inline_code">fulano</span>, con la expresión <span class="inline_code">r := x</span> mutás la celda <span class="inline_code">r</span> para que pase a referenciar el valor designado por <span class="inline_code">x</span>. La expresión <span class="inline_code">r := x</span> tiene un efecto colateral pero siempre te devuelve el mismo valor <span class="inline_code">()</span>.</p>  <p>Como una utilidad práctica que sirve para que podás definir programas con efectos colaterales, Qriollo te proporciona el operador punto y coma (";") que te sirve si querés componer dos expresiones secuencialmente: la expresión <span class="inline_code">(&lt;expresión1&gt; ; &lt;expresión2&gt;)</span> primero evalúa <span class="inline_code">&lt;expresión1&gt;</span> descartando su valor, y después evalúa <span class="inline_code">&lt;expresión2&gt;</span>.</p>  <p><em>Ejemplo básico de referencias:</em></p> <pre>qriollo&gt; <span class="user">Ref 1#</span>
(Ref 1#)
    de Ref de Numerito
qriollo&gt; <span class="user">ponele que la x es Ref 1# en desref x</span>
1#
    de Numerito
qriollo&gt; <span class="user">ponele que la x es Ref 1# en x := 5; desref x</span>
5#
    de Numerito
qriollo&gt; <span class="user">ponele que la x es Ref 1# en x := desref x + 1#; desref x</span>
2#
    de Numerito</pre>  <p><em>Factorial iterativo usando referencias:</em></p>  <p>En este ejemplo definimos el factorial de un numerito <span class="inline_code">n</span> como un proceso iterativo que agarra e inicializa <span class="inline_code">p</span> e <span class="inline_code">i</span> como referencias a <span class="inline_code"><span class="hl_number">1#</span></span>, y en cada paso cambia sus valores para que referencien respectivamente el producto <span class="inline_code">(desref p * desref i)</span> y la suma <span class="inline_code">(desref i + <span class="hl_number">1#</span>)</span>.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Referencias1.q" target="popup">Referencias1.q</a><div id="Ejemplo_Referencias1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> factorial_iterativo <span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span><br>&nbsp;&nbsp;iterar ();<br>&nbsp;&nbsp;desref p<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> i <span class="hl_keyword">es</span> Ref <span class="hl_number">1#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> p <span class="hl_keyword">es</span> Ref <span class="hl_number">1#</span><br><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> iterar <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> desref i &gt; n <span class="hl_keyword">da</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p := desref p * desref i;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i := desref i + <span class="hl_number">1#</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iterar ()<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr Referencias1 -i</span>
qriollo&gt; <span class="user">factorial_iterativo 5#</span>
120#
    de Numerito</pre>  <p><em>Evaluación diferida usando referencias:</em></p>  <p>En este ejemplo definimos dos funciones que implementan un protocolo de evaluación diferida: <span class="inline_code">bancame</span> agarra y recibe una función <span class="inline_code">f</span> de <span class="inline_code">() <span class="hl_keyword">en</span> coso</span> y te devuelve un valor de tipo <span class="inline_code">Promesa <span class="hl_keyword">de</span> coso</span>, que representa el cómputo de <span class="inline_code">f ()</span>. La función <span class="inline_code">dame</span> le das una <span class="inline_code">Promesa <span class="hl_keyword">de</span> coso</span> y te devuelve el correspondiente <span class="inline_code">coso</span>. Una promesa <span class="inline_code">p</span> la representás con una referencia que inicialmente apunta a la función <span class="inline_code">f</span>. La primera vez que evaluás <span class="inline_code">dame p</span> te evalúa <span class="inline_code">f ()</span> y se actualiza la promesa <span class="inline_code">p</span> para que apunte al resultado final de evaluar <span class="inline_code">f ()</span>. Cuando te evalúa <span class="inline_code">dame p</span> las siguientes veces, Qriollo te devuelve el valor memorizado, sin volver a evaluar <span class="inline_code">f ()</span> de nuevo.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Referencias2.q" target="popup">Referencias2.q</a><div id="Ejemplo_Referencias2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">una</span> Valor <span class="hl_keyword">de</span> coso <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> TodavíaNoEvaluada (() <span class="hl_keyword">en</span> coso)<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> YaEvaluada coso<br><br><span class="hl_keyword">una</span> Promesa <span class="hl_keyword">de</span> coso <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Prometer (Ref <span class="hl_keyword">de</span> (Valor <span class="hl_keyword">de</span> coso))<br><br><span class="hl_keyword">el</span> bancame <span class="hl_keyword">de</span> (() <span class="hl_keyword">en</span> coso)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Promesa <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> f<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Prometer (Ref (TodavíaNoEvaluada f))<br><br><span class="hl_keyword">el</span> dame <span class="hl_keyword">de</span> Promesa <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Prometer r) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> desref r<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> TodavíaNoEvaluada f <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span> <span class="hl_keyword">la</span> x <span class="hl_keyword">es</span> f () <span class="hl_keyword">en</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r := YaEvaluada x;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> YaEvaluada x <span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr Referencias2 -i</span>
qriollo&gt; <span class="user">ponele que la p es bancame (la que dado () da escupir "hola\n"; 1# + 1#) en 7#</span>
7#
    de Numerito
qriollo&gt; <span class="user">ponele que la p es bancame (la que dado () da escupir "hola\n"; 1# + 1#) en dame p</span>
hola
2#
    de Numerito
qriollo&gt; <span class="user">ponele que la p es bancame (la que dado () da escupir "hola\n"; 1# + 1#) en (dame p, dame p)</span>
hola
(2#, 2#)
    de (Numerito, Numerito)</pre>  <p>Fijate que en el primer caso la promesa no la utilizás de verdad, o sea que no te escupe el "hola" en pantalla. En el segundo caso, la promesa la utilizás una vez, o sea que sí te escupe el "hola" en pantalla y además te devuelve el valor prometido. En el tercer caso, la promesa la usás dos veces: la primera vez que forzás la promesa, para calcular la primera componente del par, te evalúa la función, escupiéndote el "hola" por pantalla, pero al momento de calcular la segunda componente del par el resultado <span class="inline_code"><span class="hl_number">2#</span></span> ya lo tiene memorizado, y te lo devuelve pero no te lo vuelve a calcular.</p>  <p><em>Igualdad de referencias</em></p>  <p>La comparación de referencias responde a su identidad como objetos, o sea, a la coincidencia de la locación de memoria a la que se refieren. Ponele:</p>  <pre>$ <span class="user">qr -i</span>
qriollo&gt; <span class="user">Ref 1# == Ref 1#</span>
No
    de Posta
qriollo&gt; <span class="user">ponele que la r es Ref 1# en r == r</span>
Sí
    de Posta</pre>  <h3><a name="doc_12">Polimorfismo</a></h3>   <p>Los tipos pueden incluir variables de tipo, que las escribís con nombres empezados en minúscula. Esto te permite que definás valores cuyo tipo es polimórfico en dichas variables. Ponele:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Polimorfismo.q" target="popup">Polimorfismo.q</a><div id="Ejemplo_Polimorfismo" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_comment">OJO. Composición de funciones.</span><br><span class="hl_keyword">la</span> composición <span class="hl_keyword">de</span> (mengano <span class="hl_keyword">en</span> zutano)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> (fulano <span class="hl_keyword">en</span> mengano) <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> fulano <span class="hl_keyword">en</span> zutano<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> f g <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> f (g x)<br><br><span class="hl_comment">OJO. Aplicar una función a cada elemento de una lista.</span><br><span class="hl_keyword">el</span> apl <span class="hl_keyword">de</span> (coso <span class="hl_keyword">en</span> cosito) <span class="hl_keyword">en</span> [coso] <span class="hl_keyword">en</span> [cosito]<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> _ []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> f (x : xs) <span class="hl_keyword">da</span> f x : apl f xs<br><br><span class="hl_comment">OJO. Dar vuelta el orden de los argumentos.</span><br><span class="hl_keyword">el</span> vueltargar <span class="hl_keyword">de</span> (a <span class="hl_keyword">en</span> b <span class="hl_keyword">en</span> c) <span class="hl_keyword">en</span> b <span class="hl_keyword">en</span> a <span class="hl_keyword">en</span> c<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> f x y <span class="hl_keyword">da</span> f y x</div></div> </div> <pre>$ <span class="user">qr Polimorfismo -i</span>
qriollo&gt; <span class="user">composición numerito_a_letra letra_a_numerito 'a'</span>
'a'
    de Letra
qriollo&gt; <span class="user">apl letra_a_numerito ['h', 'o', 'l', 'a']</span>
[104#, 111#, 108#, 97#]
    de [Numerito]
qriollo&gt; <span class="user">vueltargar composición numerito_a_letra letra_a_numerito 97#</span>
97#
    de Numerito</pre>  <p>Cuando Qriollo encuentra un conjunto de definiciones de varios valores, que pueden ser, o no, mutuamente recursivos, ya sea en:</p> <ol> <li> una expresión: <span class="inline_code"><span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span> &lt;definiciones&gt; <span class="hl_keyword">en</span> &lt;cuerpo&gt;</span>, <li> una cláusula: <span class="inline_code">&lt;cuerpo&gt; <span class="hl_structure">donde</span> &lt;definiciones&gt; <span class="hl_structure">boludo</span></span>, <li> la lista de definiciones que conforman un programa, </ol> <p>si las definiciones no las acompañás de una declaración de tipos, se portan de manera <strong>polimórfica</strong> en el cuerpo, pero <strong>monomórfica</strong> en todos los usos que están al mismo nivel. Ponele, el uso de <span class="inline_code">identidad1</span> falla, porque acá estás tratando de usar una función que no viene acompañada de una declaración de tipos de manera polimórfica (con un argumento de tipo <span class="inline_code">Posta</span> y otro de tipo <span class="inline_code">Letra</span>) por una definición que está al mismo nivel:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/IdPolimorfica1.q" target="popup">IdPolimorfica1.q</a><div id="Ejemplo_IdPolimorfica1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">la</span> identidad1 <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> (identidad1 Sí, identidad1 <span class="hl_string">'a'</span>)</div></div> </div> <pre>$ <span class="user">qr IdPolimorfica1</span>
<span class="errmsg">Se te escapó la tortuga.</span>
<span class="errmsg"></span>
<span class="errmsg">Esto no tipa ni en pedo.</span>
<span class="errmsg">El tipo del argumento no coincide con el tipo esperado por la función.</span>
<span class="errmsg">No unifican los tipos.</span>
<span class="errmsg">    Letra en ?1479</span>
<span class="errmsg">    Posta en Posta</span></pre>  <p>En cambio, el uso de <span class="inline_code">identidad2</span> funciona, porque acá lo estás usando de manera polimórfica adentro del cuerpo del <span class="inline_code"><span class="hl_structure">donde</span>...<span class="hl_structure">boludo</span></span>:</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/IdPolimorfica2.q" target="popup">IdPolimorfica2.q</a><div id="Ejemplo_IdPolimorfica2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> <br>&nbsp;&nbsp;(identidad2 Sí, identidad2 <span class="hl_string">'a'</span>)<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">la</span> identidad2 <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr IdPolimorfica2 -i</span>
qriollo&gt; <span class="user">programa</span>
(Sí, 'a')
    de (Posta, Letra)</pre>  <p>El uso de <span class="inline_code">identidad3</span> también es correcto, porque la función la acompañás de una declaración de tipos que la declara como polimórfica:</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/IdPolimorfica3.q" target="popup">IdPolimorfica3.q</a><div id="Ejemplo_IdPolimorfica3" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">la</span> identidad3 <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> (identidad3 Sí, identidad3 <span class="hl_string">'a'</span>)</div></div> </div> <pre>$ <span class="user">qr IdPolimorfica3 -i</span>
qriollo&gt; <span class="user">programa</span>
(Sí, 'a')
    de (Posta, Letra)</pre>  <h3><a name="doc_13">Condiciones (si...da...si no da...)</a></h3>   <p>Podés usar expresiones condicionales, por medio de la sintaxis:</p> <div id="condicionales" class="code"><span class="hl_keyword">si</span> &lt;condición&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br>...<br><span class="hl_keyword">si</span> &lt;condición&gt; <span class="hl_keyword">da</span> &lt;resultado&gt;<br><span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> &lt;resultado&gt;</div>  <p>Ponele:</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Condicionales.q" target="popup">Condicionales.q</a><div id="Ejemplo_Condicionales" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> crear_saludador <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span> <span class="hl_keyword">la</span> primera <span class="hl_keyword">es</span> Ref Sí <span class="hl_keyword">en</span> <span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;escupir (<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> desref primera <span class="hl_keyword">da</span> primera := No; <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> <span class="hl_string">"chau<span class="hl_escape">\n</span>"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;)<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;saludar1 ();<br>&nbsp;&nbsp;saludar1 ();<br>&nbsp;&nbsp;saludar2 ();<br>&nbsp;&nbsp;saludar2 ();<br>&nbsp;&nbsp;saludar1 ();<br>&nbsp;&nbsp;saludar1 ();<br>&nbsp;&nbsp;saludar2 ();<br>&nbsp;&nbsp;saludar2 ()<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> saludar1 <span class="hl_keyword">es</span> crear_saludador ()<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> saludar2 <span class="hl_keyword">es</span> crear_saludador ()<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr Condicionales</span>
hola
chau
hola
chau
chau
chau
chau
chau</pre>  <h3><a name="doc_14">Declaración de operadores (chirimbolos)</a></h3>   <p>Podés extender la sintaxis qriollo declarando nuevos operadores. La declaración con la que incorporás un chirimbolo a la sintaxis es:</p>  <div id="declaracion_operadores" class="code"><span class="hl_preproc">chirimbolo</span> &lt;asociatividad&gt; &lt;precedencia&gt; &lt;nombre&gt;</div>  <p>Las asociatividades posibles son tres: <span class="inline_code"><span class="hl_reserved">zurdo</span></span> para un chirimbolo binario asociativo a izquierda, <span class="inline_code"><span class="hl_reserved">diestro</span></span> para un chirimbolo binario asociativo a derecha y <span class="inline_code"><span class="hl_reserved">prefijo</span></span> para un chirimbolo unario prefijo. La precedencia es un numerito. Los operadores de mayor precedencia Qriollo los aplica sobre sus operandos antes que los operadores de menor precedencia. Un mismo chirimbolo no lo podés declarar más de una vez, así que no es posible sobrecargar un mismo chirimbolo para que sea unario y binario. Esto es diferente de lo que sí podés hacer en otros lenguajes gringos con chirimbolos como el menos "-".</p>  <p>El nombre de un chirimbolo puede ser cualquier tira de letras que estén entre las siguientes:</p> <pre>! # $ % &amp; * + .  / &lt; = &gt; ? @ : ^ | - ~ \ ; `</pre> <p>Si el nombre de un chirimbolo termina en dos puntos (":"), Qriollo lo entiende como que se trata del nombre de un constructor. La extensión de la sintaxis con nuevos chirimbolos es independiente del valor que les des. El valor de un chirimbolo se define igual que el de cualquier otro nombre.</p>  <p>Los chirimbolos los podés usar como funciones usando la sintaxis <span class="inline_code">(<span class="hl_keyword">el</span> &lt;<span class="hl_preproc">chirimbolo</span>&gt;)</span> o equivalentemente <span class="inline_code">(<span class="hl_keyword">la</span> &lt;<span class="hl_preproc">chirimbolo</span>&gt;)</span>. Los paréntesis son obligatorios en ese caso.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Chirimbolo1.q" target="popup">Chirimbolo1.q</a><div id="Ejemplo_Chirimbolo1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span>&nbsp;&nbsp;&nbsp;<span class="hl_number">10</span> &lt;@&gt; <br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">diestro</span> <span class="hl_number">20</span> &lt;$&gt;<br><br><span class="hl_keyword">el</span> &lt;@&gt; <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> cosito <span class="hl_keyword">en</span> (coso, cosito)<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x y <span class="hl_keyword">da</span> (x, y)<br><br><span class="hl_keyword">el</span> &lt;$&gt; <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> cosito <span class="hl_keyword">en</span> ([coso], [cosito])<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x y <span class="hl_keyword">da</span> ([x], [y])</div></div> </div> <pre>$ <span class="user">qr Chirimbolo1 -i</span>
qriollo&gt; <span class="user">1# &lt;@&gt; 2# &lt;@&gt; 3# &lt;@&gt; 4#</span>
(((1#, 2#), 3#), 4#)
    de (((Numerito, Numerito), Numerito), Numerito)
qriollo&gt; <span class="user">1# &lt;$&gt; 2# &lt;$&gt; 3# &lt;$&gt; 4#</span>
([1#], [([2#], [([3#], [4#])])])
    de ([Numerito], [([Numerito], [([Numerito], [Numerito])])])
qriollo&gt; <span class="user">1# &lt;$&gt; 2# &lt;@&gt; 3# &lt;$&gt; 4#</span>
(([1#], [2#]), ([3#], [4#]))
    de (([Numerito], [Numerito]), ([Numerito], [Numerito]))</pre>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Chirimbolo2.q" target="popup">Chirimbolo2.q</a><div id="Ejemplo_Chirimbolo2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">prefijo</span> <span class="hl_number">10</span> \ <br><br><span class="hl_keyword">el</span> \ <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> (coso, coso)<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> (x, x)</div></div> </div> <pre>$ <span class="user">qr Chirimbolo2 -i</span>
qriollo&gt; <span class="user">\ \ \ 1#</span>
(((1#, 1#), (1#, 1#)), ((1#, 1#), (1#, 1#)))
    de (((Numerito, Numerito), (Numerito, Numerito)), ((Numerito, Numerito), (Numerito, Numerito)))
qriollo&gt; <span class="user">fap (el \) [1#, 2#, 3#]</span>
[(1#, 1#), (2#, 2#), (3#, 3#)]
    de [(Numerito, Numerito)]</pre>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Chirimbolo3.q" target="popup">Chirimbolo3.q</a><div id="Ejemplo_Chirimbolo3" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_comment">OJO. Tienen que terminar con ":" para que sean constructores.</span><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span>&nbsp;&nbsp;&nbsp;<span class="hl_number">10</span> :+:<br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">prefijo</span> <span class="hl_number">20</span> ::<br><br><span class="hl_keyword">un</span> Árbol <span class="hl_keyword">de</span> coso <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> :: coso<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> :+: (Árbol <span class="hl_keyword">de</span> coso) (Árbol <span class="hl_keyword">de</span> coso)<br><br><span class="hl_comment">OJO. Para mostrar árboles.</span><br><span class="hl_structure">encarnar</span> Mostrable <span class="hl_keyword">para</span> Árbol <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> Mostrable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> mostrar<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> (:: x)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_string">"::"</span> ++ mostrar x<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> (x :+: y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_string">"("</span> ++ mostrar x ++ <span class="hl_string">" :+: "</span> ++ mostrar y ++ <span class="hl_string">")"</span><br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr Chirimbolo3 -i</span>
qriollo&gt; <span class="user">(::'a' :+: ::'b') :+: (::'c' :+: ::'d')</span>
((::'a' :+: ::'b') :+: (::'c' :+: ::'d'))
    de Árbol de Letra</pre>  <h3><a name="doc_15">Clases de tipos (cualidad...para...boludo, encarnar...para...boludo)</a></h3>   <p>Qriollo te permite que definás cualidades, lo que en lenguajes gringos conocés como "clases de tipos". Una cualidad es un conjunto de declaraciones de métodos con sus tipos:</p> <div id="declaracion_cualidad" class="code"><span class="hl_structure">cualidad</span> &lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;variable_de_tipo&gt;<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;nombre_método&gt; <span class="hl_keyword">de</span> &lt;tipo&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;nombre_método&gt; <span class="hl_keyword">de</span> &lt;tipo&gt;<br><span class="hl_structure">boludo</span></div> <p>El nombre de la cualidad lo tenés que empezar con mayúscula. El tipo de cada uno de los métodos tiene que depender de la variable de tipo para la que declarás la cualidad.</p>  <p>Ponele, la siguiente declaración indica que un tipo <span class="inline_code">coso</span> encarna la cualidad <span class="inline_code">Comparable</span> si lo acompañás de un método <span class="inline_code">comparar</span>, que le das dos cosos y te devuelve una posta:</p> <div id="declaracion_cualidad_comparable" class="code"><span class="hl_structure">cualidad</span> Comparable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> comparar <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> Posta<br><span class="hl_structure">boludo</span></div>  <p>Una vez que declaraste una cualidad, le podés decir de qué manera diferentes tipos concretos la encarnan, que en lenguajes gringos lo llamás "instancia":</p> <div id="declaracion_encarnar" class="code"><span class="hl_structure">encarnar</span> &lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;tipo_concreto&gt;<br>&nbsp;&nbsp;&lt;definición_método&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;&lt;definición_método&gt;<br><span class="hl_structure">boludo</span></div> <p>Con las definiciones de los métodos le das valor a cada uno de los métodos presentes en la declaración de la cualidad correspondiente. Las cualidades solamente las podés encarnar para tipos concretos que vienen encabezados por un constructor de tipos. Si el constructor de tipos tiene parámetros, tienen que ser variables de tipos que pueden variar libremente.</p>  <p>Ponele, con la siguiente declaración indicás que el tipo <span class="inline_code">Numerito</span> encarna la cualidad <span class="inline_code">Comparable</span> y definís el método <span class="inline_code">comparar</span> como el operador de comparación por menor o igual ("&lt;="):</p> <div id="declaracion_cualidad_comparable_numerito" class="code"><span class="hl_structure">encarnar</span> Comparable <span class="hl_keyword">para</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> comparar <span class="hl_keyword">es</span> (<span class="hl_keyword">el</span> &lt;=)<br><span class="hl_structure">boludo</span></div>  <p>Si el tipo concreto depende de ciertas variables de tipos, podés exigir que esas variables encarnen a su vez otras cualidades para poder definir cómo el tipo encarna una cierta cualidad:</p> <div id="declaracion_encarnar_con_restricciones" class="code"><span class="hl_structure">encarnar</span> &lt;nombre_cualidad&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">para</span> &lt;constructor_de_tipos&gt; &lt;var&gt; ... &lt;var&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> (&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;)<br>&nbsp;&nbsp;&lt;definición_método&gt;<br>&nbsp;&nbsp;...<br>&nbsp;&nbsp;&lt;definición_método&gt;<br><span class="hl_structure">boludo</span></div> <p>En el caso en el que la encarnación dependa de que una sola variable encarne cierta cualidad, los paréntesis no hace falta que los pongás.</p>  <p>Ponele, las listas de cosas son comparables si las cosas son comparables:</p>  <div id="declaracion_encarnar_comparable_lista" class="code"><span class="hl_structure">encarnar</span> Comparable <span class="hl_keyword">para</span> [coso]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> Comparable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> comparar<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dadas</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (_ : _)&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dadas</span> (x : xs) (y : ys) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comparar x y &amp;&amp; comparar xs ys<br><span class="hl_structure">boludo</span></div>  <p>Todos los tipos los podés aumentar con una declaración de las cualidades que tienen que encarnar las variables de tipos que lo conforman:</p> <div id="tipo_con_cualidades" class="code">&lt;tipo&gt;<br>&nbsp;&nbsp;<span class="hl_keyword">con</span> (&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_cualidad&gt; <span class="hl_keyword">para</span> &lt;var&gt;)</div> <p>En caso de que querás especificar una cualidad sola, los paréntesis no los necesitás. Ponele:</p> <div id="tipo_con_cualidades_ejemplo" class="code"><span class="hl_keyword">el</span> escupir_coso <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> () <span class="hl_keyword">con</span> Mostrable <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> escupir (mostrar x)</div>  <p><strong>Ejemplo: tipos finitos</strong></p>  <p>En este ejemplo definimos la cualidad <span class="inline_code">Finito</span> para los tipos que cuentan con una constante <span class="inline_code">elementos</span>, que comprende la lista de todos sus elementos. La cualidad <span class="inline_code">Finito</span> la encarnamos para las postas, para el tipo <span class="inline_code">Quizá <span class="hl_keyword">de</span> coso</span> cuando <span class="inline_code">coso</span> es finito, y para los pares de tipos finitos.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/CualidadFinito.q" target="popup">CualidadFinito.q</a><div id="Ejemplo_CualidadFinito" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span> <span class="hl_number">650</span> &gt;&lt;<br><br><span class="hl_keyword">el</span> &gt;&lt; <span class="hl_keyword">de</span> [coso] <span class="hl_keyword">en</span> [cosito] <span class="hl_keyword">en</span> [(coso, cosito)]<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;<span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (x : xs) ys <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> y <span class="hl_keyword">da</span> (x, y)) ys ++ xs &gt;&lt; ys<br><br><span class="hl_structure">cualidad</span> Finito <span class="hl_keyword">para</span> tipo<br>&nbsp;&nbsp;<span class="hl_keyword">los</span> elementos <span class="hl_keyword">de</span> [tipo]<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Finito <span class="hl_keyword">para</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">los</span> elementos <span class="hl_keyword">son</span> [Sí, No]<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Finito <span class="hl_keyword">para</span> Quizá <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> Finito <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">los</span> elementos <span class="hl_keyword">son</span> fap Este elementos<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Finito<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">para</span> (coso, cosito)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> (Finito <span class="hl_keyword">para</span> coso, Finito <span class="hl_keyword">para</span> cosito)<br>&nbsp;&nbsp;<span class="hl_keyword">los</span> elementos <span class="hl_keyword">son</span> elementos &gt;&lt; elementos<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr CualidadFinito -i</span>
qriollo&gt; <span class="user">elementos de [Posta]</span>
[Sí, No]
    de [Posta]
qriollo&gt; <span class="user">elementos de [(Posta, Posta)]</span>
[(Sí, Sí), (Sí, No), (No, Sí), (No, No)]
    de [(Posta, Posta)]
qriollo&gt; <span class="user">elementos de [(Posta, (Posta, Quizá de Posta))]</span>
[(Sí, (Sí, (Este Sí))), (Sí, (Sí, (Este No))), (Sí, (No, (Este Sí))),
 (Sí, (No, (Este No))), (No, (Sí, (Este Sí))), (No, (Sí, (Este No))),
 (No, (No, (Este Sí))), (No, (No, (Este No)))]
    de [(Posta, (Posta, Quizá de Posta))]</pre>  <p><strong>Ejemplo: monoides</strong></p>  <p>En este ejemplo definimos la cualidad <span class="inline_code">Monoide</span> para los tipos que tienen un elemento neutro y una operación asociativa. La cualidad <span class="inline_code">Monoide</span> la encarnamos para cuatro variantes distintas de los numeritos, cada una de las cuales la acompañamos de una estructura de monoide diferente: <span class="inline_code">NumeritoMax</span> va a ser el monoide de los numeritos con el máximo y el 0, <span class="inline_code">NumeritoMul</span> va a ser el monoide de los numeritos con el producto y el 1, y así sucesivamente.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/CualidadMonoide.q" target="popup">CualidadMonoide.q</a><div id="Ejemplo_CualidadMonoide" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span> <span class="hl_number">10</span> &lt;*&gt;<br><br><span class="hl_structure">cualidad</span> Monoide <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> neutro <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;*&gt;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> coso<br><span class="hl_structure">boludo</span><br><br><span class="hl_comment">OJO. Varios envoltorios para que los numeritos provean</span><br><span class="hl_comment">OJO. distintas operaciones.</span><br><span class="hl_keyword">un</span> NumeritoMax <span class="hl_keyword">es</span> <span class="hl_keyword">bien</span> NumeritoMax Numerito<br><span class="hl_keyword">un</span> NumeritoMin <span class="hl_keyword">es</span> <span class="hl_keyword">bien</span> NumeritoMin Numerito<br><span class="hl_keyword">un</span> NumeritoSum <span class="hl_keyword">es</span> <span class="hl_keyword">bien</span> NumeritoSum Numerito<br><span class="hl_keyword">un</span> NumeritoMul <span class="hl_keyword">es</span> <span class="hl_keyword">bien</span> NumeritoMul Numerito<br><br><span class="hl_keyword">el</span> desNumeritoMax <span class="hl_keyword">dado</span> (NumeritoMax n) <span class="hl_keyword">da</span> n<br><span class="hl_keyword">el</span> desNumeritoMin <span class="hl_keyword">dado</span> (NumeritoMin n) <span class="hl_keyword">da</span> n<br><span class="hl_keyword">el</span> desNumeritoSum <span class="hl_keyword">dado</span> (NumeritoSum n) <span class="hl_keyword">da</span> n<br><span class="hl_keyword">el</span> desNumeritoMul <span class="hl_keyword">dado</span> (NumeritoMul n) <span class="hl_keyword">da</span> n<br><br><span class="hl_structure">encarnar</span> Monoide <span class="hl_keyword">para</span> NumeritoMax<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> neutro <span class="hl_keyword">es</span> NumeritoMax <span class="hl_number">0#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;*&gt; <span class="hl_keyword">dados</span> (NumeritoMax x) (NumeritoMax y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x &gt; y <span class="hl_keyword">da</span> NumeritoMax x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> NumeritoMax y<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Monoide <span class="hl_keyword">para</span> NumeritoMin<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> neutro <span class="hl_keyword">es</span> NumeritoMin <span class="hl_number">4294967295#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;*&gt; <span class="hl_keyword">dados</span> (NumeritoMin x) (NumeritoMin y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x &lt; y <span class="hl_keyword">da</span> NumeritoMin x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> NumeritoMin y<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Monoide <span class="hl_keyword">para</span> NumeritoSum<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> neutro <span class="hl_keyword">es</span> NumeritoSum <span class="hl_number">0#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;*&gt; <span class="hl_keyword">dados</span> (NumeritoSum x) (NumeritoSum y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> NumeritoSum (x + y)<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Monoide <span class="hl_keyword">para</span> NumeritoMul<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> neutro <span class="hl_keyword">es</span> NumeritoMul <span class="hl_number">1#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &lt;*&gt; <span class="hl_keyword">dados</span> (NumeritoMul x) (NumeritoMul y)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> NumeritoMul (x * y)<br><span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> colapsar <span class="hl_keyword">de</span> [m] <span class="hl_keyword">en</span> m<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">con</span> Monoide <span class="hl_keyword">para</span> m<br>&nbsp;&nbsp;<span class="hl_keyword">es</span> plegard (<span class="hl_keyword">el</span> &lt;*&gt;) neutro<br><br><span class="hl_keyword">el</span> testNumeritos <span class="hl_keyword">es</span><br>&nbsp;&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;desNumeritoMax . colapsar . fap NumeritoMax $ lista,<br>&nbsp;&nbsp;&nbsp;&nbsp;desNumeritoMin . colapsar . fap NumeritoMin $ lista,<br>&nbsp;&nbsp;&nbsp;&nbsp;desNumeritoSum . colapsar . fap NumeritoSum $ lista,<br>&nbsp;&nbsp;&nbsp;&nbsp;desNumeritoMul . colapsar . fap NumeritoMul $ lista<br>&nbsp;&nbsp;]<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">la</span> lista <span class="hl_keyword">es</span> [<span class="hl_number">2#</span>, <span class="hl_number">1#</span>, <span class="hl_number">3#</span>, <span class="hl_number">4#</span>, <span class="hl_number">5#</span>]<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr CualidadMonoide -i</span>
qriollo&gt; <span class="user">testNumeritos</span>
[5#, 1#, 15#, 120#]
    de [Numerito]</pre>  <p><strong>Ejemplo: iterables</strong></p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/CualidadIterable.q" target="popup">CualidadIterable.q</a><div id="Ejemplo_CualidadIterable" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span> <span class="hl_number">250</span> //<br><span class="hl_preproc">chirimbolo</span> <span class="hl_reserved">zurdo</span> <span class="hl_number">250</span> ///<br><br><span class="hl_structure">cualidad</span> Iterable <span class="hl_keyword">para</span> bolsa<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> // <span class="hl_keyword">de</span> (coso <span class="hl_keyword">en</span> cosito)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> bolsa <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> ()<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Iterable <span class="hl_keyword">para</span> Quizá<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> //<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ Nada&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> f (Este x) <span class="hl_keyword">da</span> f x; ()<br><span class="hl_structure">boludo</span><br><br><span class="hl_structure">encarnar</span> Iterable <span class="hl_keyword">para</span> <span class="hl_reserved">PRIM</span>.Lista<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> //<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> f (x : xs) <span class="hl_keyword">da</span> f x; f // xs<br><span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> /// <span class="hl_keyword">es</span> (<span class="hl_keyword">el</span> //) . (<span class="hl_keyword">el</span> //)<br><br><span class="hl_comment">OJO. Recolectores.</span><br><br><span class="hl_keyword">un</span> Recolector <span class="hl_keyword">de</span> coso <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Recolector (coso <span class="hl_keyword">en</span> ()) (() <span class="hl_keyword">en</span> [coso])<br><br><span class="hl_keyword">el</span> crear_recolector <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> Recolector <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span> Recolector a r<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> resultado <span class="hl_keyword">es</span> Ref []<br>&nbsp;&nbsp;<span class="hl_keyword">la</span> a <span class="hl_keyword">dado</span> x&nbsp;&nbsp;<span class="hl_keyword">da</span> resultado := desref resultado ++ [x]<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> r <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span> desref resultado<br><span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> acumular <span class="hl_keyword">de</span> Recolector <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> ()<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Recolector a _) x <span class="hl_keyword">da</span> a x<br><br><span class="hl_keyword">el</span> resultado <span class="hl_keyword">de</span> Recolector <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> [coso]<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Recolector _ r) <span class="hl_keyword">da</span> r ()<br><br><span class="hl_keyword">el</span> ejemplo <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> [Numerito]<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;acumular r /// [[<span class="hl_number">1#</span>, <span class="hl_number">2#</span>, <span class="hl_number">3#</span>], [<span class="hl_number">4#</span>, <span class="hl_number">5#</span>], [<span class="hl_number">6#</span>]];<br>&nbsp;&nbsp;&nbsp;&nbsp;resultado r<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> r <span class="hl_keyword">es</span> crear_recolector ()<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr CualidadIterable -i</span>
qriollo&gt; <span class="user">escupirm // [[1#, 2#, 3#], [4#, 5#], [6#]]</span>
[1#, 2#, 3#]
[4#, 5#]
[6#]
()
    de ()
qriollo&gt; <span class="user">escupirm /// [[1#, 2#, 3#], [4#, 5#], [6#]]</span>
1#
2#
3#
4#
5#
6#
()
qriollo&gt; <span class="user">escupirm // Este [1#, 2#, 3#]</span>
[1#, 2#, 3#]
()
    de ()
qriollo&gt; <span class="user">escupirm /// Este [1#, 2#, 3#]</span>
1#
2#
3#
()
    de ()
qriollo&gt; <span class="user">ejemplo ()</span>
[1#, 2#, 3#, 4#, 5#, 6#]
    de [Numerito]</pre>  <h3><a name="doc_16">Continuaciones y call/cc (ccc, invocar)</a></h3>   <p>En Qriollo las continuaciones son <em>ciudadanos de primera clase</em>. Qriollo tiene el tipo <span class="inline_code">Cont <span class="hl_keyword">de</span> coso</span> que representa una continuación que le das un valor de tipo <span class="inline_code">coso</span>, y tiene también dos operaciones primitivas:</p> <div id="continuaciones_operaciones" class="code">ccc <span class="hl_keyword">de</span> ((Cont <span class="hl_keyword">de</span> coso) <span class="hl_keyword">en</span> coso) <span class="hl_keyword">en</span> coso<br>invocar <span class="hl_keyword">de</span> (Cont <span class="hl_keyword">de</span> coso) <span class="hl_keyword">en</span> coso <span class="hl_keyword">en</span> cosito</div> <p>La operación <span class="inline_code">ccc</span> quiere decir "Con la Continuación Corriente" y es análoga a la operación que en lenguajes gringos la conocés como <tt>call-with-current-continuation</tt> o <tt>call/cc</tt>. La operación <span class="inline_code">ccc</span> le das una función y te devuelve la continuación actual. La operación <span class="inline_code">invocar</span> espera una continuación y un coso, y te alimenta la continuación con el coso recibido. Fijate que <span class="inline_code">invocar k x</span> le pasa el control a la continuación <span class="inline_code">k</span> y no vuelve nunca, de manera que la expresión <span class="inline_code">invocar k x</span> la podés usar en cualquier contexto.</p>  <p><strong>Ejemplo: excepciones</strong></p>  <p>Acá definimos la función <span class="inline_code">tratar</span>, parecida al <span class="inline_code">try</span> de los lenguajes gringos, que le das un cuerpo y un manejador de excepciones. El manejador es como la cláusula <span class="inline_code">catch</span> de los lenguajes gringos. El cuerpo le das un parámetro que corresponde al <span class="inline_code">throw</span> de los gringos. Una diferencia con respecto a las formas gringas es que <span class="inline_code">try</span>, <span class="inline_code">catch</span> y <span class="inline_code">throw</span> suelen ser estructuras de control primitivas del lenguaje, mientras que en Qriollo son funciones comunes y corrientes que las podés definir por medio de <span class="inline_code">ccc</span> e <span class="inline_code">invocar</span>.</p>  <p>Como ejemplo, definimos una función que le das dos numeritos y te devuelve la suma, pero muestra un mensaje de error y devuelve <span class="inline_code"><span class="hl_number">666#</span></span> en caso de que cualquiera de los dos numeritos sea <span class="inline_code"><span class="hl_number">0#</span></span>. Huelga mencionar que esta no es la manera más sucinta ni qriolla de definir la función <span class="inline_code">ejemplo</span>, pero resulta ilustrativa para ejemplificar el uso de las excepciones aquí definidas.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/ContExcepciones.q" target="popup">ContExcepciones.q</a><div id="Ejemplo_ContExcepciones" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">una</span> Excepción <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Excepción Texto<br><br><span class="hl_keyword">el</span> tratar <span class="hl_keyword">de</span> ((Excepción <span class="hl_keyword">en</span> coso) <span class="hl_keyword">en</span> coso)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> (Excepción <span class="hl_keyword">en</span> coso)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> cuerpo manejador<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> ccc<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cuerpo (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> excepción <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocar continuación<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(manejador excepción)))<br><br><span class="hl_keyword">el</span> ejemplo <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> Numerito <span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> a b <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tratar<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">OJO. Cuerpo.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">la</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> fallar<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> controlar <span class="hl_string">"a"</span> a + controlar <span class="hl_string">"b"</span> b<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> controlar <span class="hl_keyword">dados</span> nombre valor<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> valor == <span class="hl_number">0#</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> fallar (Excepción nombre)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> valor<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">OJO. Manejador.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> (Excepción nombre)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> escupir<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(nombre ++ <span class="hl_string">" no puede ser cero<span class="hl_escape">\n</span>"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_number">666#</span>)</div></div> </div> <pre>$ <span class="user">qr ContExcepciones -i</span>
qriollo&gt; <span class="user">ejemplo 1# 1#</span>
2#
    de Numerito
qriollo&gt; <span class="user">ejemplo 0# 1#</span>
a no puede ser cero
666#
    de Numerito
qriollo&gt; <span class="user">ejemplo 1# 0#</span>
b no puede ser cero
666#
    de Numerito</pre>  <p><strong>Ejemplo: corrutinas</strong></p>  <p>Acá definimos la función <span class="inline_code">componer_en_paralelo</span> que le das dos rutinas y te las compone para alternar la ejecución de la primera y la segunda, de manera colaborativa. A cada rutina le pasan como parámetro una función que permite pasarle el control a la otra.</p>  <p>Podríamos definir versiones más sofisticadas del ejemplo para que las rutinas puedan intercambiar resultados, o para componer en paralelo una cantidad arbitraria de rutinas. Pero para no complicar más todavía la legibilidad del ejemplo, <span class="inline_code">resumir1</span> y <span class="inline_code">resumir2</span> son copias textuales la una de la otra. Obviamente podríamos reescribir el ejemplo de manera más abstracta, usando una estructura de datos para guardar la información correspondiente a cada rutina, evitando así la repetición.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/ContCorrutinas.q" target="popup">ContCorrutinas.q</a><div id="Ejemplo_ContCorrutinas" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> componer_en_paralelo <span class="hl_keyword">de</span> ((() <span class="hl_keyword">en</span> ()) <span class="hl_keyword">en</span> ())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> ((() <span class="hl_keyword">en</span> ()) <span class="hl_keyword">en</span> ())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> ()<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> rutina1 rutina2 <span class="hl_keyword">da</span> resumir1 ()<br>&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> siguiente1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">de</span> Ref <span class="hl_keyword">de</span> (Quizá <span class="hl_keyword">de</span> (Cont <span class="hl_keyword">de</span> ()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> Ref Nada<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> resumir1 <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> desref siguiente1<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Nada <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rutina1 (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ccc (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;siguiente1 := Este continuación;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resumir2 ()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Este continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocar continuación ()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span> <br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> siguiente2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">de</span> Ref <span class="hl_keyword">de</span> (Quizá <span class="hl_keyword">de</span> (Cont <span class="hl_keyword">de</span> ()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> Ref Nada<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> resumir2 <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> desref siguiente2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Nada <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rutina2 (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ccc (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;siguiente2 := Este continuación;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resumir1 ()))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Este continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invocar continuación ()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span> <br>&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> ejemplo <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;componer_en_paralelo (rutina <span class="hl_string">"uno<span class="hl_escape">\n</span>"</span>) (rutina <span class="hl_string">"dos<span class="hl_escape">\n</span>"</span>)<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">la</span> rutina <span class="hl_keyword">dados</span> texto pasar_el_control <span class="hl_keyword">da</span> loop ()<br>&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> loop <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir texto;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pasar_el_control ();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loop ()<br>&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr ContCorrutinas -i</span>
qriollo&gt; <span class="user">ejemplo ()</span>
uno
dos
uno
dos
uno
dos
uno
dos
uno
dos
...</pre>  <p><strong>Ejemplo: backtracking</strong></p>  <p>Acá definimos la función <span class="inline_code">elegir</span> que implementa el operador <tt>amb</tt> de McCarthy. La función <span class="inline_code">elegir</span> le das una lista de elementos y elige el primero de ellos. La función <span class="inline_code">fallar</span> recibe la 0-upla y retrocede (haciendo <i>backtracking</i>) hasta el último punto en el que hiciste una elección, eligiendo el elemento siguiente al que fue elegido la vez anterior. De manera más ideal, <span class="inline_code">elegir</span> representa la elección no determinística de un valor que no provoca una falla.</p>  <p>Ponele, la función <span class="inline_code">tripla_pitagórica</span> le das un numerito <span class="inline_code">n</span> y te devuelve tres numeritos <span class="inline_code">x</span>, <span class="inline_code">y</span>, <span class="inline_code">z</span> en el rango <span class="inline_code"><span class="hl_number">1</span>...n</span> que cumplen <tt>x<sup>2</sup> + y<sup>2</sup> = z<sup>2</sup></tt>. Para eso, agarra cada uno de los valores de manera no determinística y provoca una falla cuando la propiedad buscada no se cumplió.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/ContRetroceso.q" target="popup">ContRetroceso.q</a><div id="Ejemplo_ContRetroceso" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">las</span> alternativas <span class="hl_keyword">de</span> Ref <span class="hl_keyword">de</span> [() <span class="hl_keyword">en</span> coso] <span class="hl_keyword">son</span> Ref []<br><br><span class="hl_keyword">el</span> fallar <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> desref alternativas<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> [] <span class="hl_keyword">da</span> escupir <span class="hl_string">"NO.<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1#</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (alt : alts) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alternativas := alts;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alt ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> elegir <span class="hl_keyword">de</span> [coso] <span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dadas</span> posibilidades <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;ccc (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dada</span> continuación <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alternativas :=<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dadas</span> posibilidad ()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> invocar continuación posibilidad)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posibilidades ++<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desref alternativas;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fallar ()<br>&nbsp;&nbsp;&nbsp;&nbsp;)<br><br><span class="hl_keyword">el</span> tripla_pitagórica <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> [Numerito]<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> x <span class="hl_keyword">es</span> elegir (<span class="hl_number">1#</span>...n)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> y <span class="hl_keyword">es</span> elegir (<span class="hl_number">1#</span>...n)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> z <span class="hl_keyword">es</span> elegir (<span class="hl_number">1#</span>...n)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> x * x + y * y == z * z<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> [x, y, z]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> fallar ()</div></div> </div> <pre>$ <span class="user">qr ContRetroceso -i</span>
qriollo&gt; <span class="user">tripla_pitagórica 10#</span>
[3#, 4#, 5#]
    de [Numerito]</pre>  <h3><a name="doc_17">Mónadas y notación che (che...es...)</a></h3>   <p>Qriollo define la cualidad Mónada, similar a la que podés encontrar en otros lenguajes gringos:</p>  <div id="cualidad_monada_definicion" class="code"><span class="hl_structure">cualidad</span> Mónada <span class="hl_keyword">para</span> bolsa<br>&nbsp;&nbsp;<span class="hl_keyword">la</span> fija <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> bolsa <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> &gt;&gt;=&nbsp;&nbsp;<span class="hl_keyword">de</span> bolsa <span class="hl_keyword">de</span> coso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> (coso <span class="hl_keyword">en</span> bolsa <span class="hl_keyword">de</span> cosito)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> bolsa <span class="hl_keyword">de</span> cosito<br><span class="hl_structure">boludo</span></div>  <p>Además, Qriollo tiene la notación che que te sirve para definir una expresión monádica:</p> <div id="notacion_che_definicion" class="code"><span class="hl_keyword">che</span> <span class="hl_keyword">el</span> &lt;nombre1&gt; <span class="hl_keyword">es</span> &lt;valor1&gt;<br><span class="hl_keyword">che</span> <span class="hl_keyword">el</span> &lt;nombre2&gt; <span class="hl_keyword">es</span> &lt;valor2&gt;<br>...<br><span class="hl_keyword">che</span> <span class="hl_keyword">el</span> &lt;nombreN&gt; <span class="hl_keyword">es</span> &lt;valorN&gt;<br><span class="hl_keyword">en</span> &lt;resultado&gt;</div> <p>que equivale a esta otra expresión:</p> <div id="notacion_che_significado" class="code">&lt;valor1&gt; &gt&gt;= (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> &lt;nombre1&gt; <span class="hl_keyword">da</span><br>&lt;valor2&gt; &gt&gt;= (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> &lt;nombre2&gt; <span class="hl_keyword">da</span><br>...<br>&lt;valorN&gt; &gt&gt;= (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> &lt;nombreN&gt; <span class="hl_keyword">da</span><br>&lt;resultado&gt;)...))</div>  <p>Ponele, usando la mónada lista, podés definir funciones que simulan el comportamiento no determinístico del retroceso pero de manera puramente funcional:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/MonadaLista.q" target="popup">MonadaLista.q</a><div id="Ejemplo_MonadaLista" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">las</span> triplas_pitagóricas <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> [[Numerito]]<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_keyword">che</span> <span class="hl_keyword">el</span> x <span class="hl_keyword">es</span> <span class="hl_number">1</span>...n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">che</span> <span class="hl_keyword">el</span> y <span class="hl_keyword">es</span> <span class="hl_number">1</span>...n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">che</span> <span class="hl_keyword">el</span> z <span class="hl_keyword">es</span> <span class="hl_number">1</span>...n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> <span class="hl_keyword">si</span> x * x + y * y == z * z<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> fija [x, y, z]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> []<br><br><span class="hl_keyword">la</span> tripla_pitagórica <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> [Numerito]<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> n <span class="hl_keyword">da</span> <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> triplas_pitagóricas n<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (resultado : _) <span class="hl_keyword">da</span> resultado<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> escupir <span class="hl_string">"NO."</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr MonadaLista -i</span>
qriollo&gt; <span class="user">tripla_pitagórica 10#</span>
[3#, 4#, 5#]
    de [Numerito]</pre>  <h3><a name="doc_18">Interfaz de funciones gringas (gringo ... y GRINGO...)</a></h3>   <p>La interfaz de funciones gringas te deja extender el Qriollo con funcionalidad primitiva choreada del lenguaje objeto. El mecanismo general para las funciones gringas consiste en dos declaraciones. Primero tenés la declaración de funciones:</p>  <div id="funciones_gringas" class="code"><span class="hl_preproc">gringo</span> &lt;lenguaje_gringo&gt; <span class="hl_string">"&lt;invocación_gringa&gt;"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_qriollo&gt; <span class="hl_keyword">de</span> &lt;tipo&gt;</div>  <p>Los lenguajes gringos que soporta Qriollo por ahora son <span class="inline_code"><span class="hl_reserved">C</span></span>, <span class="inline_code"><span class="hl_reserved">Py</span></span> y <span class="inline_code"><span class="hl_reserved">Jvm</span></span>, que representan cada cual invocaciones gringas en C, en Python, y en la máquina virtual de Java.</p>  <p>Usando esta declaración definís un identificador <span class="inline_code">&lt;nombre_qriollo&gt;</span> que tiene el tipo <span class="inline_code">&lt;tipo&gt;</span>, que puede ser polimórfico, y que lo vas a tener disponible cuando el programa en Qriollo lo compilés al lenguaje objeto especificado.</p>  <p>Además de declarar funciones gringas, podés introducir otras declaraciones, que cumplen el papel de <i>pragmas</i> específicos para cada uno de los <i>backends</i>:</p>  <div id="declaraciones_gringas" class="code"><span class="hl_preproc">GRINGO</span> &lt;lenguaje_gringo&gt; <span class="hl_string">"&lt;opción_gringa&gt;"</span></div>  <p><b>Tipos válidos en declaraciones de funciones gringas</b></p>  <p>Las funciones gringas las podés declarar solamente con tipos que respeten algunos formatos particulares. Por empezar, las funciones gringas no pueden recibir funciones como parámetros, es decir que su tipo está limitado a ser algo como <span class="inline_code">(coso <span class="hl_keyword">en</span> cosito <span class="hl_keyword">en</span> ... <span class="hl_keyword">en</span> cosititito <span class="hl_keyword">en</span> resultado)</span>. Cada uno de los parámetros y el resultado pueden ser de alguno de los tipos que siguen:</p> <ul> <li> <span class="inline_code">Numerito</span> <li> <span class="inline_code">Posta</span> <li> <span class="inline_code">Letra</span> <li> <span class="inline_code">Texto</span> <li> <span class="inline_code"><span class="hl_reserved">Pendorcho</span> <span class="hl_string">"&lt;descripción&gt;"</span></span> </ul> <p>Los cuatro primeros tipos representan datos de tipos parecidos al correspondiente tipo en Qriollo, con algunas salvedades y caprichos. Ponele, en el backend para C, que lo asume siempre sobre una arquitectura de 64 bits, un <span class="inline_code">Numerito</span> es un <span class="inline_code">unsinged long long int</span>, una <span class="inline_code">Posta</span> es un <span class="inline_code">unsigned long long int</span> que puede tomar los valores <span class="inline_code"><span class="hl_number">0</span></span> o <span class="inline_code"><span class="hl_number">1</span></span>, una <span class="inline_code">Letra</span> es un <span class="inline_code">char</span>, y un <span class="inline_code">Texto</span> es un <span class="inline_code">char *</span>. En el backend para Python, un <span class="inline_code">Numerito</span> es un <span class="inline_code">int</span>, una <span class="inline_code">Posta</span> es un <span class="inline_code">bool</span>, una <span class="inline_code">Letra</span> y un <span class="inline_code">Texto</span> son de tipo <span class="inline_code">unichr</span>.</p>  <p>El tipo <span class="inline_code"><span class="hl_reserved">Pendorcho</span> <span class="hl_string">"&lt;descripción&gt;"</span></span> sirve para tener un tipo opaco en el lenguaje objeto, y la descripción es una anotación que le puede servir al compilador de Qriollo para saber cuál es su tipo en el lenguaje objeto. La notación <span class="inline_code"><span class="hl_reserved">Pendorcho</span></span> abrevia el tipo <span class="inline_code"><span class="hl_reserved">Pendorcho</span> <span class="hl_string">""</span></span>. En el backend de Python, un <span class="inline_code"><span class="hl_reserved">Pendorcho</span></span> representa un objeto cualquiera, y la anotación la ignora. En el backend de C, un <span class="inline_code"><span class="hl_reserved">Pendorcho</span> <span class="hl_string">"&lt;tipo_gringo&gt;"</span></span> representa un puntero con el tipo gringo indicado; por ejemplo <span class="inline_code"><span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span></span> puede servir para obtener el resultado de una invocación a <span class="inline_code">fopen</span>.</p>  <p>El backend para Python te deja también declarar funciones que retornan valores del tipo <span class="inline_code">Falible <span class="hl_keyword">de</span> coso</span>, donde &lt;tipo&gt; es alguno de los tipos anteriores. No se permite anidar el tipo <span class="inline_code">Falible</span> en declaraciones de funciones gringas. El tipo <span class="inline_code">Falible <span class="hl_keyword">de</span> coso</span> te sirve para representar un cómputo que puede elevar excepciones: si no levantás ninguna excepción, el valor retornado es <span class="inline_code">Joya valor</span>, mientras que si levantás una excepción, el valor que te devuelve es <span class="inline_code">Cagó mensaje</span>, donde <span class="inline_code">mensaje</span> es un mensaje de error acorde.</p>  <p>La declaración de funciones gringas en C y en Python usa un mecanismo sencillo: el texto de la invocación gringa es un cacho de programa en el que todas las apariciones de <span class="inline_code">${<span class="hl_number">1</span>}</span>, <span class="inline_code">${<span class="hl_number">2</span>}</span>, <span class="inline_code">${<span class="hl_number">3</span>}</span>, etcétera, se macroexpanden al parámetro correspondiente recibido por la función.</p>  <p><b>Interfaz gringa para C</b></p>  <p>Ponele, acá se ve cómo podés usar en Qriollo algunas funciones de la biblioteca estándar de C para implementar una funcionalidad muy básica de lectura y escritura de archivos. Este programa qriollo solamente funciona si lo compilás usando el backend de C, con la opción <span class="inline_code">--c</span> del compilador.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/GringoC1.q" target="popup">GringoC1.q</a><div id="Ejemplo_GringoC1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fopen(${1}, <span class="hl_escape">\"</span>r<span class="hl_escape">\"</span>)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abrir_para_lectura <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fgetc(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leer_una_letra <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span> <span class="hl_keyword">en</span> Letra<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fclose(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerrar_archivo <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span> <span class="hl_keyword">en</span> ()<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;escupirm (leer_una_letra archivo);<br>&nbsp;&nbsp;cerrar_archivo archivo<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> archivo <span class="hl_keyword">es</span> abrir_para_lectura <span class="hl_string">"a.txt"</span><br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr GringoC1 --c GringoC1.c &amp;&amp; gcc -o GringoC1 GringoC1.c</span>
$ <span class="user">echo a &gt; a.txt</span>
$ <span class="user">./GringoC1</span>
'a'</pre>  <p>En el backend para C las declaraciones <span class="inline_code"><span class="hl_preproc">GRINGO</span> <span class="hl_reserved">C</span> <span class="hl_string">"&lt;pragma&gt;"</span></span> permiten meter directamente código en C que quieras que forme parte del programa final.</p>  <p>Si querés podés usar la funcionalidad gringa para hacer cosas más jáquers. Ponele, podés definir un paquete para trabajar con vectores de números <i>unboxed</i>:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/GringoC2.q" target="popup">GringoC2.q</a><div id="Ejemplo_GringoC2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">GRINGO</span> <span class="hl_reserved">C</span> <span class="hl_string">"typedef unsigned long long int *QVector;"</span><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"malloc(sizeof(unsigned long long int) * ${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crear <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"QVector"</span><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"${1}[${2}] = ${3}"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meter <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"QVector"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> ()<br><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"${1}[${2}]"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obtener <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"QVector"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> i <span class="hl_keyword">da</span> meter vector i i)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_number">0#</span>...tamaño);<br>&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> i <span class="hl_keyword">da</span> escupirm (obtener vector i))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_number">0#</span>...tamaño)<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> tamaño <span class="hl_keyword">es</span> <span class="hl_number">10#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> vector <span class="hl_keyword">es</span> crear tamaño<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr GringoC2 --c -o GringoC2.c &amp;&amp; gcc -o GringoC2 GringoC2.c</span>
$ <span class="user">./GringoC2</span>
0#
1#
2#
3#
4#
5#
6#
7#
8#
9#</pre>  <p><b>Interfaz gringa para Python</b></p>  <p>Las ideas de la interfaz gringa para Python son muy parecidas a las de la interfaz gringa para C. Acá vienen los mismos ejemplos de arriba pero adaptados para Python:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/GringoPy1.q" target="popup">GringoPy1.q</a><div id="Ejemplo_GringoPy1" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"open(${1}, 'r')"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abrir_para_lectura <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}.read(1)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leer_una_letra <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_keyword">en</span> Letra<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}.close()"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerrar_archivo <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_keyword">en</span> ()<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;escupirm (leer_una_letra archivo);<br>&nbsp;&nbsp;cerrar_archivo archivo<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> archivo <span class="hl_keyword">es</span> abrir_para_lectura <span class="hl_string">"a.txt"</span><br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr GringoPy1 --py -o GringoPy1.py</span>
$ <span class="user">echo a &gt; a.txt</span>
$ <span class="user">python2 GringoPy1.py</span>
'a'</pre>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/GringoPy2.q" target="popup">GringoPy2.q</a><div id="Ejemplo_GringoPy2" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"[0 for i in range(${1})]"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crear <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span><br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}[${2}] = ${3}"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meter <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> ()<br><br><span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}[${2}]"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obtener <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> i <span class="hl_keyword">da</span> meter vector i i)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_number">0#</span>...tamaño);<br>&nbsp;&nbsp;aplistar (<span class="hl_keyword">la</span> <span class="hl_keyword">que</span> <span class="hl_keyword">dado</span> i <span class="hl_keyword">da</span> escupirm (obtener vector i))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_number">0#</span>...tamaño)<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> tamaño <span class="hl_keyword">es</span> <span class="hl_number">10#</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> vector <span class="hl_keyword">es</span> crear tamaño<br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">qr GringoPy2 --py | python2 -</span>
0#
1#
2#
3#
4#
5#
6#
7#
8#
9#</pre>   <h3><a name="doc_19">Compilación condicional (pragma SI...BOLUDO)</a></h3>   <p>Los programas en Qriollo permiten que les metás condiciones para determinar en tiempo de compilación qué cachos de programa incluir y cuáles no. La sintaxis para hacer esto:</p> <div id="compilacion_condicional_sintaxis" class="code"><span class="hl_preproc">SI</span> (&plusmn;Funcionalidad, ..., &plusmn;Funcionalidad)<br>&nbsp;&nbsp;&lt;cacho_de_programa&gt;<br><span class="hl_preproc">BOLUDO</span></div> <p>Qriollo incluye el cacho de programa indicado si y solamente si se cumplen todas las condiciones que ponés entre paréntesis. Las condiciones pueden ser <span class="inline_code">+Funcionalidad</span> para pedir que una funcionalidad esté activada, o <span class="inline_code">-Funcionalidad</span> para pedir que una funcionalidad esté desactivada. Las funcionalidades son nombres empezados por mayúscula arbitrarios, que pueden representar lo que se te ocurra. Al momento de invocar el intérprete/compilador de Qriollo podés pasarle la opción <tt>--con Funcionalidad</tt> para indicarle que la funcionalidad está presente y <tt>--sin Funcionalidad</tt> para indicarle que la funcionalidad está ausente.</p>  <p>Ponele:</p> <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/CompilacionCondicional.q" target="popup">CompilacionCondicional.q</a><div id="Ejemplo_CompilacionCondicional" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">SI</span> (+Temprano)<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> saludo <span class="hl_keyword">es</span> <span class="hl_string">"buen día"</span><br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_preproc">SI</span> (-Temprano)<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> saludo <span class="hl_keyword">es</span> <span class="hl_string">"buenas noches"</span><br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> escupir saludo; escupir <span class="hl_string">"<span class="hl_escape">\n</span>"</span></div></div> </div> <pre>$ <span class="user">qr CompilacionCondicional --con Temprano</span>
buen día
$ <span class="user">qr CompilacionCondicional --sin Temprano</span>
buenas noches
$ <span class="user">qr CompilacionCondicional --con Temprano --py -o temprano.py</span>
$ <span class="user">python2 temprano.py</span>
buen día
$ <span class="user">qr CompilacionCondicional --sin Temprano --py -o tarde.py</span>
$ <span class="user">python2 tarde.py</span>
buenas noches</pre>  <p>Las cuatro funcionalidades siguientes se prenden o apagan automáticamente dependiendo de la situación bajo la que estés compilando el programa:</p> <ol> <li> <span class="inline_code">Compilado</span>: se prende si estás compilando, en contraposición a interpretando. <li> <span class="inline_code"><span class="hl_reserved">C</span></span>: se prende si estás compilando a C. <li> <span class="inline_code"><span class="hl_reserved">Py</span></span>: se prende si estás compilando a Python. <li> <span class="inline_code"><span class="hl_reserved">Jvm</span></span>: se prende si estás compilando a la JVM. </ol>  <p>La combinación de estas características permite que podás escribir programas que funcionan en varias plataformas. Ponele, se pueden combinar los ejemplos de manejo de archivos que se presentaron antes para que el programa funcione tanto si lo compilás a C como si lo compilás a Python:</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/GringoCondicional.q" target="popup">GringoCondicional.q</a><div id="Ejemplo_GringoCondicional" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">SI</span> (+<span class="hl_reserved">C</span>)<br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fopen(${1}, <span class="hl_escape">\"</span>r<span class="hl_escape">\"</span>)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abrir_para_lectura <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span><br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fgetc(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leer_una_letra <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span> <span class="hl_keyword">en</span> Letra<br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"fclose(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerrar_archivo <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"FILE *"</span> <span class="hl_keyword">en</span> ()<br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_preproc">SI</span> (+<span class="hl_reserved">Py</span>)<br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"open(${1}, 'r')"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abrir_para_lectura <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span><br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}.read(1)"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leer_una_letra <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_keyword">en</span> Letra<br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"${1}.close()"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cerrar_archivo <span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_keyword">en</span> ()<br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;escupirm (leer_una_letra archivo);<br>&nbsp;&nbsp;cerrar_archivo archivo<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> archivo <span class="hl_keyword">es</span> abrir_para_lectura <span class="hl_string">"a.txt"</span><br><span class="hl_structure">boludo</span></div></div> </div> <pre>$ <span class="user">echo a &gt; a.txt</span>
$ <span class="user">qr GringoCondicional --py | python2 -</span>
'a'
$ <span class="user">qr GringoCondicional --c -o a.c &amp;&amp; gcc -o a a.c &amp;&amp; ./a</span>
'a'</pre>  <h3><a name="doc_20">Módulos (entregar..., enchufar...)</a></h3>   <p>Qriollo permite que definás e importés módulos. En Qriollo el nombre de un módulo lo tenés que empezar con mayúscula y puede incluir puntos que lo hacen relativo a la ruta donde se buscan los módulos. Ponele:</p> <table> <tr> <th>Nombre del módulo</th> <th>Nombre del archivo</th> </tr> <tr> <td>Fulano</td><td>Fulano.q</td> </tr> <tr> <td>Lenguaje.Qriollo.Parser</td><td>Lenguaje/Qriollo/Parser.q</td> </tr> </table> <p>De manera predeterminada, Qriollo busca los módulos en el directorio actual (".") y nada más. Pasándole la opción <tt>--ruta directorio1:directorio2:...:directorioN</tt> le podés indicar en qué directorios querés que busque los módulos. La búsqueda le da prioridad siempre al directorio que viene escrito primero.</p>  <p>La manera más precaria de usar módulos es la siguiente: si no le decís nada, un módulo exporta todos los nombres que define. Si querés que el módulo <span class="inline_code">B</span> use las definiciones del módulo <span class="inline_code">A</span> ponés <span class="inline_code"><span class="hl_include">enchufar</span> A</span> y listo. Ponele:</p>  <b>A.q</b> <div id="ej_modulo1_A" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_keyword">el</span> saludo <span class="hl_keyword">es</span> <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span></div> <b>B.q</b> <div id="ej_modulo1_B" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">enchufar</span> A<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> escupir saludo</div> <pre>$ <span class="user">qr B</span>
hola</pre>  <p>Un módulo puede declarar exactamente la lista de todos los nombres que exporta, usando la cláusula:</p> <div id="ej_modulo_entregar" class="code"><span class="hl_include">entregar</span> (&lt;nombre&gt;, ..., &lt;nombre&gt;)</div>  <p>Ponele:</p> <b>A.q</b> <div id="ej_modulo2_A" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">entregar</span> (saludo_público)<br><br><span class="hl_keyword">el</span> saludo_público <span class="hl_keyword">es</span> <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span><br><span class="hl_keyword">el</span> saludo_privado <span class="hl_keyword">es</span> <span class="hl_string">"chau<span class="hl_escape">\n</span>"</span></div> <b>B.q</b> <div id="ej_modulo2_B" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">enchufar</span> A<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir saludo_público<br><span class="hl_comment">OJO. escupir saludo_privado   no funciona</span></div> <pre>$ <span class="user">qr B</span>
hola</pre>  <p>Si un módulo <tt>B</tt> importa un módulo <tt>A</tt> puede acceder a todos los nombres privados de <tt>A</tt> si los califica con el nombre <tt>A</tt>. Un nombre calificado es un nombre que viene acompañado por el nombre del módulo y separado por un punto. Ponele:</p>  <b>A.q</b> <div id="ej_modulo3_A" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_comment">OJO. A no entrega ningún nombre</span><br><span class="hl_include">entregar</span> ()<br><br><span class="hl_keyword">el</span> saludo_privado <span class="hl_keyword">es</span> <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span></div> <b>B.q</b> <div id="ej_modulo3_B" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">enchufar</span> A<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_comment">OJO. B puede usar los nombres privados de A</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir A.saludo_privado</div> <pre>$ <span class="user">qr B</span>
hola</pre>  <p>Cuando un módulo importa a otro, se puede especificar cuáles de sus nombres importa, usando la sintaxis:</p> <div id="ej_modulo_enchufar1" class="code"><span class="hl_include">enchufar</span> &lt;módulo&gt; (&lt;nombre&gt;, ..., &lt;nombre&gt;)</div> <p>Ponele:</p>  <b>A.q</b> <div id="ej_modulo3_A" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">entregar</span> (saludo_relevante, saludo_irrelevante)<br><br><span class="hl_keyword">el</span> saludo_relevante&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span><br><span class="hl_keyword">el</span> saludo_irrelevante <span class="hl_keyword">es</span> <span class="hl_string">"chau<span class="hl_escape">\n</span>"</span></div> <b>B.q</b> <div id="ej_modulo3_B" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">enchufar</span> A (saludo_relevante)<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir saludo_relevante<br>&nbsp;&nbsp;<span class="hl_comment">OJO. escupir saludo_irrelevante   no funciona</span></div> <pre>$ <span class="user">qr B</span>
hola</pre>  <p>El módulo que importa un nombre también puede decidir de qué manera quiere renombrarlo para su uso local, usando la sintaxis:</p> <div id="ej_modulo_enchufar1" class="code"><span class="hl_include">enchufar</span> &lt;módulo&gt; (<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;nombre_ajeno&gt; <span class="hl_keyword">como</span> &lt;nombre_local&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...<br>&nbsp;&nbsp;)</div>  <p>Ponele:</p>  <b>A.q</b> <div id="ej_modulo3_A" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">entregar</span> (saludo)<br><br><span class="hl_keyword">el</span> saludo <span class="hl_keyword">es</span> <span class="hl_string">"hola<span class="hl_escape">\n</span>"</span></div> <b>B.q</b> <div id="ej_modulo3_B" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><span class="hl_include">enchufar</span> A (saludo <span class="hl_keyword">como</span> bienvenida)<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> escupir bienvenida</div> <pre>$ <span class="user">qr B</span>
hola</pre>  <h3><a name="doc_21">Caso de estudio: intérprete de Lizp</a></h3>   <p>A continuación presentamos un intérprete de Lizp de juguete. Técnicamente se trata de un Mock Lisp, porque la estructura de datos usada para representar un programa en Lizp no es una estructura de datos de Lizp. Provee un Read-Eval-Print Loop mínimo, y lo podés compilar tanto a C como a Python.</p>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/Lizp.q" target="popup">Lizp.q</a><div id="Ejemplo_Lizp" class="code"><span class="hl_include">enchufar</span> Chamuyo<br><br><span class="hl_preproc">SI</span> (+<span class="hl_reserved">C</span>)<br>&nbsp;&nbsp;<span class="hl_preproc">GRINGO</span> <span class="hl_reserved">C</span> <span class="hl_string">"#include &lt;readline/readline.h&gt;"</span><br><br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"readline(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;_leer_línea <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"char *"</span><br><br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"${1}"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;_convertir&nbsp;&nbsp;<span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"char *"</span> <span class="hl_keyword">en</span> Texto<br><br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">C</span> <span class="hl_string">"free(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;_liberar&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">de</span> <span class="hl_reserved">Pendorcho</span> <span class="hl_string">"char *"</span> <span class="hl_keyword">en</span> ()<br><br>&nbsp;&nbsp;<span class="hl_keyword">el</span> leer_línea <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> Texto <span class="hl_keyword">dado</span> prompt <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> pendorcho <span class="hl_keyword">es</span> _leer_línea prompt<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> texto&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> _convertir pendorcho<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> _liberar pendorcho; texto<br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_preproc">SI</span> (+<span class="hl_reserved">Py</span>)<br>&nbsp;&nbsp;<span class="hl_preproc">gringo</span> <span class="hl_reserved">Py</span> <span class="hl_string">"raw_input(${1})"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;leer_línea <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> Texto<br><span class="hl_preproc">BOLUDO</span><br><br><span class="hl_comment">OJO. Lee líneas hasta que la concatenación</span><br><span class="hl_comment">OJO. de todas ellas tenga los paréntesis</span><br><span class="hl_comment">OJO. balanceados.</span><br><span class="hl_keyword">el</span> leer_sexpr <span class="hl_keyword">de</span> () <span class="hl_keyword">en</span> Texto<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span> ciclo <span class="hl_string">""</span> <span class="hl_number">0#</span><br>&nbsp;&nbsp;<span class="hl_structure">donde</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> ciclo <span class="hl_keyword">dados</span> acc p <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> línea <span class="hl_keyword">es</span> leer_línea (prompt p)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> p2&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">es</span> paréntesis_pendientes p línea<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> p2 &gt; <span class="hl_number">0#</span> <span class="hl_keyword">da</span> ciclo (acc ++ <span class="hl_string">" "</span> ++ línea) p2<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> acc ++ <span class="hl_string">" "</span> ++ línea<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> prompt <span class="hl_keyword">dado</span> p<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> p &gt; <span class="hl_number">0#</span> <span class="hl_keyword">da</span> <span class="hl_string">"..... "</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_string">"Lizp&gt; "</span><br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">los</span> paréntesis_pendientes <span class="hl_keyword">de</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Texto<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> p (Texto xs) <span class="hl_keyword">da</span> rec p xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> rec <span class="hl_keyword">de</span> Numerito <span class="hl_keyword">en</span> [Letra] <span class="hl_keyword">en</span> Numerito<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> p [] <span class="hl_keyword">da</span> p<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> p (<span class="hl_string">'('</span> : xs) <span class="hl_keyword">da</span> rec (p + <span class="hl_number">1#</span>) xs <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> p (<span class="hl_string">')'</span> : xs) <span class="hl_keyword">da</span> rec (p - <span class="hl_number">1#</span>) xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> p (_&nbsp;&nbsp;&nbsp;: xs) <span class="hl_keyword">da</span> rec p xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_keyword">una</span> Sexpr <span class="hl_keyword">es</span><br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Átomo Texto<br>&nbsp;&nbsp;<span class="hl_keyword">bien</span> Cons (Ref <span class="hl_keyword">de</span> Sexpr) (Ref <span class="hl_keyword">de</span> Sexpr)<br><br><span class="hl_comment">OJO. Read.</span><br><br><span class="hl_keyword">el</span> entre <span class="hl_keyword">de</span> Letra <span class="hl_keyword">en</span> Letra <span class="hl_keyword">en</span> Letra <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x y z <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;letra_a_numerito x &lt;= letra_a_numerito y &&<br>&nbsp;&nbsp;&nbsp;&nbsp;letra_a_numerito y &lt;= letra_a_numerito z<br><br><span class="hl_keyword">el</span> constituyente <span class="hl_keyword">de</span> Letra <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> letra <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'a'</span> letra <span class="hl_string">'z'</span> ||<br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'A'</span> letra <span class="hl_string">'Z'</span> ||<br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'0'</span> letra <span class="hl_string">'9'</span> ||<br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'-'</span> letra <span class="hl_string">'-'</span> ||<br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'?'</span> letra <span class="hl_string">'?'</span> ||<br>&nbsp;&nbsp;&nbsp;&nbsp;entre <span class="hl_string">'!'</span> letra <span class="hl_string">'!'</span><br><br><span class="hl_keyword">el</span> leer_átomo <span class="hl_keyword">de</span> [Letra] <span class="hl_keyword">en</span> ([Letra], [Letra])<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [] <span class="hl_keyword">da</span> ([], [])<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> constituyente x<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_structure">mirar</span> leer_átomo xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (átomo, cola) <span class="hl_keyword">da</span> (x : átomo, cola)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> ([], (x : xs))<br><br><span class="hl_keyword">el</span> leer_lista <span class="hl_keyword">de</span> [Letra] <span class="hl_keyword">en</span> ([Sexpr], [Letra])<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [] <span class="hl_keyword">da</span> escupir <span class="hl_string">"final temprano de la entrada<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">' '</span> : xs)&nbsp;&nbsp;<span class="hl_keyword">da</span> leer_lista xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\t</span>'</span> : xs) <span class="hl_keyword">da</span> leer_lista xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\r</span>'</span> : xs) <span class="hl_keyword">da</span> leer_lista xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\n</span>'</span> : xs) <span class="hl_keyword">da</span> leer_lista xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">')'</span> : xs) <span class="hl_keyword">da</span> ([], xs)<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : xs)&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> leer1 (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (sexpr, cola) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> leer_lista cola<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (lista, cola2) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sexpr : lista, cola2)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> leer1 <span class="hl_keyword">de</span> [Letra] <span class="hl_keyword">en</span> (Sexpr, [Letra])<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> [] <span class="hl_keyword">da</span> escupir <span class="hl_string">"final temprano de la entrada<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">' '</span> : xs)&nbsp;&nbsp;<span class="hl_keyword">da</span> leer1 xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\t</span>'</span> : xs) <span class="hl_keyword">da</span> leer1 xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\r</span>'</span> : xs) <span class="hl_keyword">da</span> leer1 xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'<span class="hl_escape">\n</span>'</span> : xs) <span class="hl_keyword">da</span> leer1 xs<br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (<span class="hl_string">'('</span> : xs) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> leer_lista xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (lista, cola) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(plegard cons nil lista, cola)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;<span class="hl_keyword">dada</span> (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> constituyente x <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> leer_átomo (x : xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (átomo, cola) <span class="hl_keyword">da</span> (Átomo $ Texto átomo, cola)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"entrada deforme<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br><br><span class="hl_keyword">el</span> leer <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Texto xs) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> leer1 xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (sexpr, _) <span class="hl_keyword">da</span> sexpr<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_comment">OJO. Eval.</span><br><br><span class="hl_keyword">el</span> letras_iguales <span class="hl_keyword">de</span> [Letra] <span class="hl_keyword">en</span> [Letra] <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> Sí<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(_ : _)&nbsp;&nbsp;<span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (_ : _)&nbsp;&nbsp;[]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> No<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (x : xs) (y : ys) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;letra_a_numerito x == letra_a_numerito y &&<br>&nbsp;&nbsp;&nbsp;&nbsp;letras_iguales xs ys<br><br><span class="hl_keyword">el</span> texto_igual <span class="hl_keyword">de</span> Texto <span class="hl_keyword">en</span> Texto <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Texto a) (Texto b) <span class="hl_keyword">da</span> letras_iguales a b<br><br><span class="hl_keyword">el</span> buscar <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Cons (Ref (Cons (Ref k) (Ref v))) (Ref e)) a<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq k a <span class="hl_keyword">da</span> v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> buscar e a<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ a <span class="hl_keyword">da</span> a<br><br><span class="hl_keyword">el</span> reemplazar <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> ()<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Cons (Ref (Cons (Ref k) ref_v)) (Ref e)) a v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq k a <span class="hl_keyword">da</span> ref_v := v<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> reemplazar e a v<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ _ _ <span class="hl_keyword">da</span> <br>&nbsp;&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"variable indefinida<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;espichar <span class="hl_number">1</span><br><br><span class="hl_keyword">el</span> t <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">es</span> Átomo <span class="hl_string">"t"</span><br><br><span class="hl_keyword">el</span> nil <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">es</span> Átomo <span class="hl_string">"nil"</span><br><br><span class="hl_keyword">el</span> cons <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> x y <span class="hl_keyword">da</span> Cons (Ref x) (Ref y)<br><br><span class="hl_keyword">el</span> atom <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Átomo _) <span class="hl_keyword">da</span> t<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> _&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> nil<br><br><span class="hl_keyword">el</span> car <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Átomo a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> nil<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Cons (Ref x) _) <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> cdr <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Átomo a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> nil<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Cons _ (Ref x)) <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> cadr <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">es</span> car . cdr<br><br><span class="hl_keyword">el</span> cddr <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">es</span> cdr . cdr<br><br><span class="hl_keyword">el</span> eq <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Posta<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo a) (Átomo b)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> texto_igual a b<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ _ <span class="hl_keyword">da</span> No<br><br><span class="hl_keyword">el</span> evaluar <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (Átomo a)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> buscar entorno (Átomo a)<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (Cons (Ref x) (Ref xs))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x (Átomo <span class="hl_string">"tal-cual"</span>) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;car xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x (Átomo <span class="hl_string">"bloque"</span>) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evaluar_bloque entorno xs<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x (Átomo <span class="hl_string">"fun"</span>) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cons (Átomo <span class="hl_string">"#procedimiento"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons entorno xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x (Átomo <span class="hl_string">"si"</span>) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> eq (evaluar entorno (car xs)) nil<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Sí <span class="hl_keyword">da</span> evaluar_bloque entorno (cddr xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> No <span class="hl_keyword">da</span> evaluar entorno (cadr xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x (Átomo <span class="hl_string">"guardar!"</span>) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> valor <span class="hl_keyword">es</span> evaluar entorno (cadr xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">en</span> reemplazar entorno (car xs) valor; valor<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aplicar (evaluar entorno x)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(evaluar_lista entorno (sexpr_lista xs))<br><br><span class="hl_keyword">el</span> extender <span class="hl_keyword">de</span> [Sexpr] <span class="hl_keyword">en</span> [Sexpr] <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> []&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;&nbsp;entorno <span class="hl_keyword">da</span> entorno<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (p : ps) [] entorno <span class="hl_keyword">da</span> entorno<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (p : ps) (a : as) entorno <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;cons (cons p a) (extender ps as entorno)<br><br><span class="hl_keyword">el</span> aplicar <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> [Sexpr] <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Cons<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Átomo <span class="hl_string">"#procedimiento"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Cons (Ref entorno)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Cons (Ref parámetros)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref cuerpo))))))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argumentos<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evaluar_bloque<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(extender<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sexpr_lista parámetros)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argumentos<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entorno)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cuerpo<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo <span class="hl_string">"#prim:atomo?"</span>) [x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> atom x<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo <span class="hl_string">"#prim:cons"</span>)&nbsp;&nbsp;&nbsp;[x, y]&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> cons x y<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo <span class="hl_string">"#prim:car"</span>)&nbsp;&nbsp;&nbsp;&nbsp;[x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> car x<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo <span class="hl_string">"#prim:cdr"</span>)&nbsp;&nbsp;&nbsp;&nbsp;[x]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> cdr x<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> (Átomo <span class="hl_string">"#prim:igual?"</span>) [x, y]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq x y <span class="hl_keyword">da</span> t<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> nil<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> _ _ <span class="hl_keyword">da</span> nil<br><br><span class="hl_keyword">el</span> evaluar_bloque <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> Sexpr <span class="hl_keyword">en</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (Átomo a) <span class="hl_keyword">da</span> Átomo a<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Cons<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Cons<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Átomo <span class="hl_string">"def"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Cons (Ref nombre)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Cons (Ref valor)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref (Átomo <span class="hl_string">"nil"</span>))))))))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Ref xs)) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_structure">mirar</span> entorno<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> Cons a r <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r := cons (cons nombre (evaluar entorno valor))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(desref r)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;evaluar_bloque entorno xs<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (Cons (Ref a) (Ref (Átomo _))) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;evaluar entorno a<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (Cons (Ref a) (Ref xs)) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;evaluar entorno a;<br>&nbsp;&nbsp;&nbsp;&nbsp;evaluar_bloque entorno xs<br><br><span class="hl_keyword">el</span> evaluar_lista <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> [Sexpr] <span class="hl_keyword">en</span> [Sexpr]<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno [] <span class="hl_keyword">da</span> []<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> entorno (sexpr : sexprs) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;evaluar entorno sexpr : evaluar_lista entorno sexprs<br><br><span class="hl_keyword">el</span> sexpr_lista_1 <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> ([Sexpr], Quizá <span class="hl_keyword">de</span> Texto)<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> sexpr <span class="hl_keyword">da</span> rec [] sexpr<br>&nbsp;&nbsp;<span class="hl_structure">donde</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">el</span> rec<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> xs (Átomo <span class="hl_string">"nil"</span>) <span class="hl_keyword">da</span> (xs, Nada)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> xs (Átomo a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> (xs, Este a)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dados</span> xs (Cons (Ref x) (Ref ys))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> rec (xs ++ [x]) ys<br>&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_keyword">el</span> sexpr_lista <span class="hl_keyword">de</span> Sexpr <span class="hl_keyword">en</span> [Sexpr]<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> sexpr <span class="hl_keyword">da</span> <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> sexpr_lista_1 sexpr<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (xs, _) <span class="hl_keyword">da</span> xs<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><br><span class="hl_comment">OJO. Print.</span><br><br><span class="hl_keyword">el</span> juntar<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> sep []&nbsp;&nbsp;<span class="hl_keyword">da</span> <span class="hl_string">""</span><br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> sep [x] <span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;<span class="hl_keyword">dados</span> sep (x : y : ys)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> x ++ sep ++ juntar sep (y : ys)<br><br><span class="hl_structure">encarnar</span> Mostrable <span class="hl_keyword">para</span> Sexpr<br>&nbsp;&nbsp;<span class="hl_keyword">el</span> mostrar<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> (Átomo x)&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">da</span> x<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">dado</span> sexpr <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">mirar</span> sexpr_lista_1 sexpr<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (xs, Nada) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_string">"("</span> ++ juntar <span class="hl_string">" "</span> (fap mostrar xs) ++ <span class="hl_string">")"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> (xs, Este a) <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_string">"("</span> ++ juntar <span class="hl_string">" "</span> (fap mostrar xs)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="hl_string">" . "</span> ++ a ++ <span class="hl_string">")"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_structure">boludo</span><br><span class="hl_structure">boludo</span><br><br><span class="hl_comment">OJO. Read + eval.</span><br><br><span class="hl_keyword">el</span> entorno_global <span class="hl_keyword">es</span><br>&nbsp;&nbsp;&nbsp;cons (cons nil nil) $<br>&nbsp;&nbsp;&nbsp;extender [Átomo <span class="hl_string">"atomo?"</span>] [Átomo <span class="hl_string">"#prim:atomo?"</span>] $<br>&nbsp;&nbsp;&nbsp;extender [Átomo <span class="hl_string">"cons"</span>]&nbsp;&nbsp;&nbsp;[Átomo <span class="hl_string">"#prim:cons"</span>] $<br>&nbsp;&nbsp;&nbsp;extender [Átomo <span class="hl_string">"car"</span>]&nbsp;&nbsp;&nbsp;&nbsp;[Átomo <span class="hl_string">"#prim:car"</span>] $<br>&nbsp;&nbsp;&nbsp;extender [Átomo <span class="hl_string">"cdr"</span>]&nbsp;&nbsp;&nbsp;&nbsp;[Átomo <span class="hl_string">"#prim:cdr"</span>] $<br>&nbsp;&nbsp;&nbsp;extender [Átomo <span class="hl_string">"igual?"</span>] [Átomo <span class="hl_string">"#prim:igual?"</span>] $<br>&nbsp;&nbsp;&nbsp;nil<br><br><span class="hl_keyword">el</span> read_eval_print_loop <span class="hl_keyword">dado</span> () <span class="hl_keyword">da</span><br>&nbsp;&nbsp;<span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">la</span> expresión <span class="hl_keyword">es</span> leer $ leer_sexpr ()<br>&nbsp;&nbsp;<span class="hl_keyword">en</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> eq expresión (Átomo <span class="hl_string">"salir"</span>) <span class="hl_keyword">da</span> ()<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">si</span> <span class="hl_keyword">no</span> <span class="hl_keyword">da</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir .&nbsp;&nbsp;mostrar .&nbsp;&nbsp;evaluar entorno_global $<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expresión;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escupir <span class="hl_string">"<span class="hl_escape">\n</span>"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read_eval_print_loop ()<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span><br>&nbsp;&nbsp;read_eval_print_loop ()</div></div> </div>  <p><strong>Ejecución del intérprete de Lizp en C</strong></p> <pre>$ <span class="user">qr Lizp.q --c -o Lizp.c &amp;&amp; gcc -o Lizp Lizp.c -lreadline</span>
$ <span class="user">./Lizp</span>
Lizp&gt; <span class="user"> (tal-cual (a b c))</span>
(a b c)
Lizp&gt; <span class="user">(cons a (cons b (cons c nil)))</span>
(a b c)
Lizp&gt; <span class="user">(((fun (x) (fun (y) x)) (tal-cual a)) (tal-cual b))</span>
a
Lizp&gt; <span class="user">(bloque</span>
..... <span class="user">    (def a 1)</span>
..... <span class="user">    (guardar! a 2)</span>
..... <span class="user">    a)</span>
2
Lizp&gt; <span class="user">salir</span></pre>  <div style="overflow:hidden"> <div class="source_file"><a class="filename" href="Ejemplos/factorial.lizp" target="popup">factorial.lizp</a><div id="Ejemplo_factorial.li" class="code">(bloque<br>&nbsp;&nbsp;(def cero (fun () (tal-cual O)))<br>&nbsp;&nbsp;(def suc (fun (n) (cons (tal-cual S) n)))<br>&nbsp;&nbsp;(def pred cdr)<br><br>&nbsp;&nbsp;(def sumar<br>&nbsp;&nbsp;&nbsp;&nbsp;(fun (n m)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">si</span> (igual? n (cero))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(suc (sumar (pred n) m)))))<br><br>&nbsp;&nbsp;(def multiplicar<br>&nbsp;&nbsp;&nbsp;&nbsp;(fun (n m)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">si</span> (igual? n (cero))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cero)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sumar m (multiplicar (pred n) m)))))<br><br>&nbsp;&nbsp;(def factorial<br>&nbsp;&nbsp;&nbsp;&nbsp;(fun (n)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="hl_keyword">si</span> (igual? n (cero))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(suc (cero))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(multiplicar n (factorial (pred n))))))<br><br>&nbsp;&nbsp;(factorial<br>&nbsp;&nbsp;&nbsp;&nbsp;(suc (suc (suc (suc (cero)))))))<br>salir</div></div> </div> <pre>$ <span class="user">./Lizp &lt; factorial.lizp</span>
Lizp&gt; <span class="user">(bloque</span>
..... <span class="user">  (def cero (fun () (tal-cual O)))</span>
..... <span class="user">  (def suc (fun (n) (cons (tal-cual S) n)))</span>
..... <span class="user">  (def pred cdr)</span>
..... <span class="user"></span>
..... <span class="user">  (def sumar</span>
..... <span class="user">    (fun (n m)</span>
..... <span class="user">      (si (igual? n (cero))</span>
..... <span class="user">        m</span>
..... <span class="user">        (suc (sumar (pred n) m)))))</span>
..... <span class="user"></span>
..... <span class="user">  (def multiplicar</span>
..... <span class="user">    (fun (n m)</span>
..... <span class="user">      (si (igual? n (cero))</span>
..... <span class="user">        (cero)</span>
..... <span class="user">        (sumar m (multiplicar (pred n) m)))))</span>
..... <span class="user"></span>
..... <span class="user">  (def factorial</span>
..... <span class="user">    (fun (n)</span>
..... <span class="user">      (si (igual? n (cero))</span>
..... <span class="user">        (suc (cero))</span>
..... <span class="user">        (multiplicar n (factorial (pred n))))))</span>
..... <span class="user"></span>
..... <span class="user">  (factorial</span>
..... <span class="user">    (suc (suc (suc (suc (cero)))))))</span>
(S S S S S S S S S S S S S S S S S S S S S S S S . O)
Lizp&gt; <span class="user">salir</span></pre>  <p><strong>Ejecución del intérprete de Lizp en Python</strong></p> <pre>$ <span class="user">qr Lizp.q --py -o Lizp.py</span>
$ <span class="user">python2 Lizp.py</span>
$ <span class="user">qr Lizp</span>
Lizp&gt; <span class="user">(bloque</span>
..... <span class="user">  (def mapcar</span>
..... <span class="user">    (fun (f x)</span>
..... <span class="user">      (si (igual? x nil)</span>
..... <span class="user">        nil</span>
..... <span class="user">        (cons (f (car x)) (mapcar f (cdr x))))))</span>
..... <span class="user">  (mapcar (fun (x) (cons x x)) (tal-cual (1 2 3))))</span>
((1 . 1) (2 . 2) (3 . 3))
Lizp&gt; <span class="user">salir</span></pre>  <h3><a name="doc_22">Convenciones léxicas</a></h3>   <p>Los identificadores aceptados son <tt>[a-zA-Z_][a-zA-Z0-9_]*</tt>. El identificador "_" (guión bajo) lo tiene reservado para los comodines. En realidad no solo te acepta caracteres ASCII en <tt>[a-zA-Z]</tt> sino caracteres Unicode alfabéticos. La entrada te la supone codificada en UTF-8. Igual que en Haskell, los identificadores comenzados por minúscula te los reserva para variables de datos y de tipos, mientras que los identificadores comenzados por mayúscula te los reserva para constructores de datos y de tipos.</p>  <p>Los espacios en blanco te los ignora salvo como delimitadores de símbolos léxicos. La identación es irrelevante.</p>  <p>Las palabras actualmente reservadas por Qriollo son:</p>  <div style="border: solid black 1px; padding:20px"> <span class="inline_code"><span class="hl_keyword">ante</span> <span class="hl_keyword">bien</span> <span class="hl_structure">boluda</span> <span class="hl_structure">boludo</span> <span class="hl_preproc">BOLUDA</span> <span class="hl_preproc">BOLUDO</span> <span class="hl_keyword">che</span></span> <span class="inline_code"><span class="hl_preproc">chirimbolo</span> <span class="hl_keyword">como</span> <span class="hl_keyword">con</span> <span class="hl_structure">cualidad</span> <span class="hl_keyword">cuya</span> <span class="hl_keyword">cuyas</span> <span class="hl_keyword">cuyo</span> <span class="hl_keyword">cuyos</span></span> <span class="inline_code"><span class="hl_keyword">da</span> <span class="hl_keyword">dada</span> <span class="hl_keyword">dadas</span> <span class="hl_keyword">dado</span> <span class="hl_keyword">dados</span> <span class="hl_keyword">de</span> <span class="hl_structure">donde</span> <span class="hl_keyword">el</span> <span class="hl_keyword">en</span> <span class="hl_structure">encarnar</span></span> <span class="inline_code"><span class="hl_include">enchufar</span> <span class="hl_include">entregar</span> <span class="hl_keyword">es</span> <span class="hl_preproc">gringa</span> <span class="hl_preproc">gringas</span> <span class="hl_preproc">gringo</span> <span class="hl_preproc">gringos</span></span> <span class="inline_code"><span class="hl_preproc">GRINGA</span> <span class="hl_preproc">GRINGAS</span> <span class="hl_preproc">GRINGO</span> <span class="hl_preproc">GRINGOS</span> <span class="hl_keyword">la</span> <span class="hl_keyword">las</span> <span class="hl_keyword">los</span> <span class="hl_structure">mirar</span></span> <span class="inline_code"><span class="hl_keyword">no</span> <span class="hl_keyword">para</span> <span class="hl_keyword">pero</span> <span class="hl_keyword">ponele</span> <span class="hl_keyword">que</span> <span class="hl_keyword">si</span> <span class="hl_preproc">SI</span> <span class="hl_keyword">son</span> <span class="hl_structure">tiene</span> <span class="hl_structure">tienen</span></span> <span class="inline_code"><span class="hl_keyword">un</span> <span class="hl_keyword">una</span> <span class="hl_keyword">unas</span> <span class="hl_keyword">unos</span></span> </div>  <p>Además, el módulo <span class="inline_code"><span class="hl_reserved">PRIM</span></span> y algunos tipos de datos básicos (como <span class="inline_code">Ref</span> y <span class="inline_code"><span class="hl_reserved">Pendorcho</span></span>) te los trata de manera especial.</p>  <p>Las constantes de tipo <span class="inline_code">Numerito</span> las tenés que escribir como <tt>[0-9]+#</tt>, donde el cardinal al final es obligatorio. Las constantes numéricas sin cardinal (ponele <span class="inline_code"><span class="hl_number">42</span></span>) te las convierte en una invocación a la función <span class="inline_code">levantar_dígitos</span> sobre una lista de numeritos que representa la escritura en base <span class="inline_code"><span class="hl_number">2</span>**<span class="hl_number">32</span></span> de la constante numérica original, con los dígitos ordenados de menos significativo a más significativo. La función <span class="inline_code">levantar_dígitos</span> corresponde a la cualidad <span class="inline_code">Digital</span>, que provee funciones para convertir un tipo ida y vuelta a una lista de numeritos:</p> <div id="ej_levantar_digitos" class="code"><span class="hl_structure">cualidad</span> Digital <span class="hl_keyword">para</span> coso<br>&nbsp;&nbsp;digitalizar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> [Numerito]<br>&nbsp;&nbsp;levantar_dígitos <span class="hl_keyword">de</span> [Numerito] <span class="hl_keyword">en</span> coso<br><span class="hl_structure">boludo</span></div>  <p>Las constantes de tipo <span class="inline_code">Letra</span> (caracteres) las tenés que encerrar entre comillas simples (<tt>'</tt>) y las constantes de tipo <span class="inline_code">Texto</span> (<em>strings</em>) entre comillas dobles. Las cadenas de texto no pueden incluir <em>linefeeds</em>. Se admiten secuencias de escape con su significado usual:</p> <pre>\\ \" \' \a \b \f \n \r \t \v</pre> <p>Los comentarios comienzan con <span class="inline_code"><span class="hl_comment">OJO.</span></span> (el punto es obligatorio) y terminan con un <em>linefeed</em>.</p>  <h3><a name="doc_23">Recomendaciones de estilo</a></h3>  <p>La recomendación de estilo más importante es:</p> <p align="center"><big><strong>Usá el lenguaje como te pinte.</strong></big></p> <p>Más allá de esa máxima, las recomendaciones generales son las mismas que las de los lenguajes gringos: elegí nombres declarativos, ponele sangría al programa para reflejar el nivel de anidamiento y demás.</p> <p>Por tratarse de un lenguaje funcional, es mejor que limités el uso de sus características impuras: entrada/salida con efectos colaterales, referencias y manejo de continuaciones.</p> <p>Una recomendación de estilo propia de Qriollo es tratar de declinar los artículos (<span class="inline_code"><span class="hl_keyword">el</span></span>, <span class="inline_code"><span class="hl_keyword">la</span></span>, <span class="inline_code"><span class="hl_keyword">los</span></span>, <span class="inline_code"><span class="hl_keyword">las</span></span>), cópulas (<span class="inline_code"><span class="hl_keyword">es</span></span>, <span class="inline_code"><span class="hl_keyword">son</span></span>), y, en general, todas las palabras clave que admitan flexión, de acuerdo con el contexto, para que el programa resulte eufónico.</p>  <h3><a name="doc_24">Bichos y limitaciones conocidas</a></h3>  <ol> <li> No hay ninguna manera posible de hacer <strong>compilaci&oacute;n separada</strong>. Esta es la mayor limitación de Qriollo en la actualidad. Resolver esta limitación requeriría una reestructuración fundamental del compilador, ya que el proceso de compilación asume de manera permanente que toda la información del programa la puede encontrar disponible en una única expresión. <li> Como consecuencia de la limitación anterior, la interacción con el <i>toplevel</i> es extremadamente lenta, ya que la evaluación de una expresión requiere recompilar la expresión y todos los módulos de los que depende (p.ej. el <span class="inline_code">Chamuyo</span>). <li> Por el momento Qriollo no cuenta con ninguna biblioteca más que el <span class="inline_code">Chamuyo</span>, que define apenas algunas funciones básicas. Para seguir con este largo camino de reinventar la rueda haría falta: <ol> <li> Colecciones (listas, vectores, conjuntos, diccionarios, texto Unicode y texto binario). <li> Aritmética (números enteros grandes, números de punto flotante, racionales, complejos). <li> Estructuras de control adicionales (iteradores, excepciones, condiciones). <li> Entrada/salida (manejo de archivos, sockets, protocolos de internet, interfaz con bases de datos). <li> Cualidades (funtores, mónadas, tipos de datos plegables). <li> Concurrencia (corrutinas, procesos con colas de mensajes). <li> Utilidades varias (expresiones regulares, fecha/hora, interfaz con el sistema operativo, imágenes, audio, criptografía, números pseudoaleatorios, compresión, etcétera). <li> Herramienta de documentación para Qriollo. <li> Generador de parsers. <li> Todo lo demás. </ol> <li> El compilador de Qriollo no hace <strong>inferencia de <em>kinds</em></strong>. Esto es incorrecto y permite compilar expresiones con errores de tipos, o inclusive usar tipos que nunca están definidos. Se podría agregar inferencia de <em>kinds</em> con algo de esfuerzo. Por el momento este cambio tiene baja prioridad, ya que representa un bajo beneficio por sobre su costo de implementación en un lenguaje concebido en joda. <li> En un conjunto de declaraciones locales que están todas al mismo nivel (<tt>letrec</tt>), una función <strong>no se porta de manera polimórfica</strong> salvo que le indiqués su tipo. Ponele, el programa siguiente da un error de tipos porque la identidad no es polimórfica: <div id="ejemplo_limitacion_polimorfismo1" class="code"><span class="hl_keyword">la</span> identidad <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> (identidad <span class="hl_number">1#</span>, identidad <span class="hl_string">'a'</span>)</div> Pero el programa siguiente funciona, porque la identidad se declara explícitamente como polimórfica: <div id="ejemplo_limitacion_polimorfismo2" class="code"><span class="hl_keyword">la</span> identidad <span class="hl_keyword">de</span> coso <span class="hl_keyword">en</span> coso<br>&nbsp;&nbsp;<span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><br><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> (identidad <span class="hl_number">1#</span>, identidad <span class="hl_string">'a'</span>)</div> El programa siguiente también funciona, porque aunque la declaración de la identidad no incluye explícitamente su tipo, su definición es interna: <div id="ejemplo_limitacion_polimorfismo3" class="code"><span class="hl_keyword">el</span> programa <span class="hl_keyword">es</span> (identidad <span class="hl_number">1#</span>, identidad <span class="hl_string">'a'</span>)<br><span class="hl_structure">donde</span><br>&nbsp;&nbsp;<span class="hl_keyword">la</span> identidad <span class="hl_keyword">dado</span> x <span class="hl_keyword">da</span> x<br><span class="hl_structure">boludo</span></div> <li> El <strong>backend de la JVM</strong> es <strong>inestable</strong> y probablemente desaparezca en el futuro. Quizás una mejor alternativa sería que el compilador genere código fuente Java. <li> El <strong>backend de C</strong> tiene limitaciones de <strong>memoria</strong>. No podés reservar objetos de más de <tt>Qr_BLOCK_CAPACITY</tt> palabras. Esta limitación no debería afectar los programas normales, ya que la mayor parte de los objetos aparentemente "grandes" para vos en realidad te los construye a partir de objetos chiquitos (ponele, una cadena de texto muy larga la representa como una lista enlazada de pequeños nodos). El <strong>garbage collector</strong> es precario y prioriza su brevedad y simplicidad de implementación. </ol>  <h3><a name="doc_25">Licencia</a></h3>   <p>Licencia Qriolla - 1810-2016, Hermandá Qriolla</p>  <p>Términos y condiciones:</p>  <p>Este programa es una MIERDA y se distribuye con la esperanza de que lo uses para LO QUE SE TE CANTE EL ORTO siempre que NO ROMPAS LAS PELOTAS.</p>  </div> </section>  </article> </body> </html> 